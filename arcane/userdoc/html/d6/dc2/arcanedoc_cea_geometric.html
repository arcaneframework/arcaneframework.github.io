<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Arcane: Gestion de la g√©om√©trie.</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Arcane
   &#160;<span id="projectnumber">3.7.15.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- G√©n√©r√© par Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Recherche','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d6/dc2/arcanedoc_cea_geometric.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Gestion de la g√©om√©trie. </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table des mati√®res</h3>
<ul><li class="level1"><a href="#arcanedoc_cea_geometric_introduction">Introduction</a></li>
<li class="level1"><a href="#arcanedoc_cea_geometric_geomelement">√âl√©ments g√©om√©triques</a></li>
<li class="level1"><a href="#arcanedoc_cea_geometric_geomshape">Formes g√©om√©triques</a></li>
<li class="level1"><a href="#arcanedoc_cea_geometric_viewusage">Utilisation des vues</a><ul><li class="level2"><a href="#arcanedoc_cea_geometric_geomelementview">Utilisation des vues sur les √©l√©ments g√©om√©triques.</a></li>
<li class="level2"><a href="#arcanedoc_cea_geometric_geomshapeview">Utilisation des GeomShapeView</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Cette page d√©crit les classes g√©rant la g√©om√©trie dans Arcane.</p>
<p>Le but des classes g√©om√©triques de Arcane est de fournir une structure de donn√©e unifi√©e pour g√©rer de mani√®re efficace les op√©rations sur les polygones (en 2D) et les poly√®dres (en 3D).</p>
<h1><a class="anchor" id="arcanedoc_cea_geometric_introduction"></a>
Introduction</h1>
<p>Les polygones et poly√®dres support√©s sont d√©finis dans l'√©num√©ration GeomType. Il s'agit de:</p><ul>
<li>en 2D, les triangles, les quadrangles, les pentagones et les hexagones.</li>
<li>en 3D, les t√©tra√®dres, les pyramides, les prismes classiques, les hexa√®dres, les prismes √† base pentagonales (hepta√®dres) et les prismes √† base hexagonales (octa√®dres).</li>
</ul>
<p>Arcane fournit deux types d'objets pour g√©rer la g√©om√©trie.</p><ul>
<li>le premier type et le plus simple est appel√© un <b>√©l√©ment g√©om√©trique</b> et contient uniquement les coordonn√©es des noeuds de cet √©l√©ment. Ces classes ont pour nom le type de l'√©l√©ment suivi de <b>Element</b>. Par exemple, pour les h√©xa√®dres, le nom est <a class="el" href="../../d2/d66/classHexaedron8Element.html" title="ElÈments gÈomÈtriques de type GeomType::Hexaedron8.">Hexaedron8Element</a>.</li>
<li>le second type est appel√© une <b>forme g√©om√©trique</b> et contient en plus des coordonn√©es des noeuds, les coordonn√©es des centres des faces, des milieux des ar√™tes et du centre ainsi que des informations sur la connectivit√©. Les formes g√©om√©triques sont g√©r√©es par la classe GeomShape et les vues sur ces formes g√©om√©triques par la classe GeomShapeView (anciennement GenericElement). En g√©n√©ral, seule la vue est utilis√©e.</li>
</ul>
<h1><a class="anchor" id="arcanedoc_cea_geometric_geomelement"></a>
√âl√©ments g√©om√©triques</h1>
<p>Le terme <b>√©l√©ment g√©om√©trique</b> englobe l'ensemble des classes qui g√®rent des √©l√©ments g√©om√©triques en conservant uniquement les coordonn√©es des sommets de ces √©l√©ments. Les diff√©rentes classes sont:</p><ul>
<li><a class="el" href="../../d1/d71/classTriangle3Element.html" title="ElÈments gÈomÈtriques de type GeomType::Triangle3.">Triangle3Element</a>;</li>
<li><a class="el" href="../../d5/dfe/classQuad4Element.html" title="ElÈments gÈomÈtriques de type GeomType::Quad4.">Quad4Element</a>;</li>
<li><a class="el" href="../../dd/dbe/classPentagon5Element.html" title="ElÈments gÈomÈtriques de type GeomType::Pentagon5.">Pentagon5Element</a>;</li>
<li><a class="el" href="../../d8/d5c/classHexagon6Element.html" title="ElÈments gÈomÈtriques de type GeomType::Hexagon6.">Hexagon6Element</a>;</li>
<li><a class="el" href="../../d2/da9/classTetraedron4Element.html" title="ElÈments gÈomÈtriques de type GeomType::Tetraedron4.">Tetraedron4Element</a>;</li>
<li><a class="el" href="../../d8/dfb/classPyramid5Element.html" title="ElÈments gÈomÈtriques de type GeomType::Pyramid5.">Pyramid5Element</a>;</li>
<li><a class="el" href="../../d6/db6/classPentaedron6Element.html" title="ElÈments gÈomÈtriques de type GeomType::Pentaedron6.">Pentaedron6Element</a>;</li>
<li><a class="el" href="../../d2/d66/classHexaedron8Element.html" title="ElÈments gÈomÈtriques de type GeomType::Hexaedron8.">Hexaedron8Element</a>;</li>
<li><a class="el" href="../../d1/d3e/classHeptaedron10Element.html" title="ElÈments gÈomÈtriques de type GeomType::Heptaedron10.">Heptaedron10Element</a>;</li>
<li><a class="el" href="../../dc/d1a/classOctaedron12Element.html" title="ElÈments gÈomÈtriques de type GeomType::Octaedron12.">Octaedron12Element</a>;</li>
</ul>
<p>Elles s'utilisent de la m√™me mani√®re, seul le nombre de coordonn√©es diff√©re: </p><div class="fragment"><div class="line">Real3 x0,x1,x2,x3,x4,x5,x6,x7,x8;</div>
<div class="line"><a class="code" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a> quad(x0,x1,x2,x3); <span class="comment">// Cr√©ation d&#39;un quad avec initialisation</span></div>
<div class="line"><a class="code" href="../../d2/d66/classHexaedron8Element.html">Hexaedron8Element</a> hexa; <span class="comment">// Cr√©ation d&#39;un hexa non initialis√©</span></div>
<div class="line">hexa.<a class="code" href="../../d2/d66/classHexaedron8Element.html#a11cdac271839a0e3837b67638db2a7fd">init</a>(x0,x1,x2,x3,x4,x5,x6,x7); <span class="comment">// Initialisation</span></div>
<div class="line">hexa[5] = Real3(1.2,0.0,0.0); <span class="comment">// Change la valeur du 6√®me sommet</span></div>
<div class="line">Real3 z = hexa[4]; <span class="comment">// R√©cup√®re la valeur du 5√®me sommet</span></div>
<div class="ttc" id="aclassHexaedron8Element_html"><div class="ttname"><a href="../../d2/d66/classHexaedron8Element.html">Hexaedron8Element</a></div><div class="ttdoc">ElÈments gÈomÈtriques de type GeomType::Hexaedron8.</div><div class="ttdef"><b>Definition:</b> GeneratedGeomElement.h:344</div></div>
<div class="ttc" id="aclassHexaedron8Element_html_a11cdac271839a0e3837b67638db2a7fd"><div class="ttname"><a href="../../d2/d66/classHexaedron8Element.html#a11cdac271839a0e3837b67638db2a7fd">Hexaedron8Element::init</a></div><div class="ttdeci">void init(const Real3 &amp;a0, const Real3 &amp;a1, const Real3 &amp;a2, const Real3 &amp;a3, const Real3 &amp;a4, const Real3 &amp;a5, const Real3 &amp;a6, const Real3 &amp;a7)</div><div class="ttdoc">Initialise l'instance avec les coordonnÈes passÈes en argument.</div><div class="ttdef"><b>Definition:</b> GeneratedGeomElement.h:367</div></div>
<div class="ttc" id="aclassQuad4Element_html"><div class="ttname"><a href="../../d5/dfe/classQuad4Element.html">Quad4Element</a></div><div class="ttdoc">ElÈments gÈomÈtriques de type GeomType::Quad4.</div><div class="ttdef"><b>Definition:</b> GeneratedGeomElement.h:56</div></div>
</div><!-- fragment --><p>Les √©l√©ments g√©om√©triques s'utilisent en g√©n√©ral via la notion de vue, √† la mani√®re des classes tableaux (Array, ArrayView et ConstArrayView). Il existe donc une vue modifiable et une vue constante pour chaque type d'√©l√©ment g√©om√©trique. Pour obtenir le nom de la vue, il suffit d'ajouter <em>View</em> ou <em>ConstView</em> au nom de la classe: </p><div class="fragment"><div class="line"><a class="code" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a> quad;</div>
<div class="line"><a class="code" href="../../d8/d9b/classQuad4ElementView.html">Quad4ElementView</a> quad_view = quad.<a class="code" href="../../d5/dfe/classQuad4Element.html#aaee4766c44dfed133f969a646fca14e0">view</a>();</div>
<div class="line"><a class="code" href="../../d0/d35/classQuad4ElementConstView.html">Quad4ElementConstView</a> quad_const_view = quad.<a class="code" href="../../d5/dfe/classQuad4Element.html#a333c91a245adceb9d04d03425a76c7c9">constView</a>();</div>
<div class="ttc" id="aclassQuad4ElementConstView_html"><div class="ttname"><a href="../../d0/d35/classQuad4ElementConstView.html">Quad4ElementConstView</a></div><div class="ttdoc">Vue constante sur les ÈlÈments gÈomÈtriques de type GeomType::Quad4.</div><div class="ttdef"><b>Definition:</b> GeneratedGeomElementView.h:77</div></div>
<div class="ttc" id="aclassQuad4ElementView_html"><div class="ttname"><a href="../../d8/d9b/classQuad4ElementView.html">Quad4ElementView</a></div><div class="ttdoc">Vue modifiable sur les ÈlÈments gÈomÈtriques de type GeomType::Quad4.</div><div class="ttdef"><b>Definition:</b> GeneratedGeomElementView.h:95</div></div>
<div class="ttc" id="aclassQuad4Element_html_a333c91a245adceb9d04d03425a76c7c9"><div class="ttname"><a href="../../d5/dfe/classQuad4Element.html#a333c91a245adceb9d04d03425a76c7c9">Quad4Element::constView</a></div><div class="ttdeci">ConstViewType constView() const</div><div class="ttdoc">Vue constante sur l'ÈlÈment.</div><div class="ttdef"><b>Definition:</b> GeneratedGeomElement.h:87</div></div>
<div class="ttc" id="aclassQuad4Element_html_aaee4766c44dfed133f969a646fca14e0"><div class="ttname"><a href="../../d5/dfe/classQuad4Element.html#aaee4766c44dfed133f969a646fca14e0">Quad4Element::view</a></div><div class="ttdeci">ViewType view()</div><div class="ttdoc">Vue modifiable sur l'ÈlÈment.</div><div class="ttdef"><b>Definition:</b> GeneratedGeomElement.h:89</div></div>
</div><!-- fragment --><p>La conversion d'un √©l√©ment vers une vue peut se faire automatiquement:</p>
<div class="fragment"><div class="line"><a class="code" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a> quad;</div>
<div class="line"><a class="code" href="../../d8/d9b/classQuad4ElementView.html">Quad4ElementView</a> quad_view = quad;</div>
<div class="line"><a class="code" href="../../d0/d35/classQuad4ElementConstView.html">Quad4ElementConstView</a> quad_const_view = quad;</div>
</div><!-- fragment --><h1><a class="anchor" id="arcanedoc_cea_geometric_geomshape"></a>
Formes g√©om√©triques</h1>
<p>Contrairement aux √©l√©ments g√©om√©triques, il n'existe qu'une seule classe pour g√©rer les formes g√©om√©triques. Cette classe s'appelle GeomShape et peut contenir les informations g√©om√©triques de n'importe quel type de maille d√©finie dans l'√©num√©ration GeomType.</p>
<p>Une forme g√©om√©trique contient les coordonn√©es des noeuds, du centre des faces, du milieu des ar√™tes et du centre de la forme.</p>
<p>La forme g√©om√©trique s'utilise exclusivement via une vue sur une GeomShape. Cette vue est appel√©e GeomShapeView et contient toutes les m√©thodes pour r√©cup√©rer les informations n√©cessaires sur la forme g√©om√©trique. Il existe aussi des vues sp√©cifiques par type g√©om√©trique. Comme pour les vues sur les √©l√©ments g√©om√©triques, ces classes ont pour nom le type g√©om√©trique suffix√© par <em>ShapeView:</em> </p><ul>
<li><a class="el" href="../../de/dca/classTriangle3ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Triangle3.">Triangle3ShapeView</a>;</li>
<li><a class="el" href="../../dd/df5/classQuad4ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Quad4.">Quad4ShapeView</a>;</li>
<li><a class="el" href="../../db/d09/classPentagon5ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Pentagon5.">Pentagon5ShapeView</a>;</li>
<li><a class="el" href="../../d4/d45/classHexagon6ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Hexagon6.">Hexagon6ShapeView</a>;</li>
<li><a class="el" href="../../d9/d66/classTetraedron4ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Tetraedron4.">Tetraedron4ShapeView</a>;</li>
<li><a class="el" href="../../d2/d56/classPyramid5ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Pyramid5.">Pyramid5ShapeView</a>;</li>
<li><a class="el" href="../../dd/d42/classPentaedron6ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Pentaedron6.">Pentaedron6ShapeView</a>;</li>
<li><a class="el" href="../../d3/da3/classHexaedron8ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Hexaedron8.">Hexaedron8ShapeView</a>;</li>
<li><a class="el" href="../../d1/d73/classHeptaedron10ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Heptaedron10.">Heptaedron10ShapeView</a>;</li>
<li><a class="el" href="../../d7/dea/classOctaedron12ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Octaedron12.">Octaedron12ShapeView</a>;</li>
</ul>
<p>Arcane g√®re deux utilisations possibles des formes g√©om√©triques:</p><ul>
<li>la forme g√©om√©trique associ√©e √† une maille du maillage. Pour cet usage, on utilise la classe GeomShapeMng qui conserve pour un maillage donn√© l'ensemble des informations n√©cessaires (voir la documentation de la classe GeomShapeMng pour son utilisation et son initialisation). La r√©cup√©ration d'une vue se fait comme suit: <div class="fragment"><div class="line">GeomShapeMng&amp; shape_mng;</div>
<div class="line">Cell cell;</div>
<div class="line">GeomShapeView shape_view;</div>
<div class="line"><span class="comment">// Initialisation √† partir d&#39;une maille \a cell</span></div>
<div class="line">shape_mng.initShape(shape_view,cell);</div>
</div><!-- fragment --></li>
<li>la forme g√©om√©trique quelconque, qui n'est pas directement associ√©e √† une entit√© du maillage et qui peut √™tre cr√©√©e n'importe o√π. Elle peut √™tre utilis√©e par exemple pour d√©finir une forme g√©om√©trique sur les sous-volumes de contr√¥le d'une maille. Pour ce cas, il faut utiliser une instance de GeomShape pour conserver les informations. Cette instance doit rester valide tant qu'on souhaite utiliser la vue qui lui est associ√©e. L'initialisation se fait soit avec un hexa√®dre, soit avec un quadrangle (il est pr√©vu dans une version ult√©rieure de pouvoir initialiser avec d'autres types). Par exemple, pour un hexa√®dre: <div class="fragment"><div class="line">GeomShape shape;</div>
<div class="line"><a class="code" href="../../d2/d66/classHexaedron8Element.html">Hexaedron8Element</a> hexa;</div>
<div class="line"><span class="comment">// Initialisation √† partir d&#39;un √©l√©ment g√©om√©trique existant \a hexa.</span></div>
<div class="line"><a class="code" href="../../d3/da3/classHexaedron8ShapeView.html">Hexaedron8ShapeView</a> shape_view = shape.initFromHexaedron8(hexa);</div>
<div class="ttc" id="aclassHexaedron8ShapeView_html"><div class="ttname"><a href="../../d3/da3/classHexaedron8ShapeView.html">Hexaedron8ShapeView</a></div><div class="ttdoc">Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Hexaedron8.</div><div class="ttdef"><b>Definition:</b> GeneratedGeomShapeView.h:277</div></div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="arcanedoc_cea_geometric_viewusage"></a>
Utilisation des vues</h1>
<dl class="section warning"><dt>Avertissement</dt><dd>Comme toutes les classes qui utilisent la notion de vue dans Arcane, les vues sur les objets g√©om√©triques ne restent valides que tant que le conteneur desquelles elles sont issues reste valide. En particulier, il faut restreindre leur utilisation au passage de param√®tres entre m√©thodes et il ne faut <b>JAMAIS</b> conserver une vue au cours d'un calcul (comme champ d'une classe par exemple).</dd></dl>
<p>Lorsqu'on souhaite utilise un objet g√©om√©trique, le type des vues √† utiliser d√©pend des coordonn√©es dont on a besoin:</p><ul>
<li>si on a besoin uniquement des coordonn√©es des noeuds de l'√©l√©ment, il faut utiliser une vue sur un √©l√©ment. La vue doit √™tre constante si on ne modifie pas l'√©l√©ment. Par exemple, pour une m√©thode qui calcule le volume d'un hexa√®dre, il faut utiliser un <a class="el" href="../../dc/df7/classHexaedron8ElementConstView.html" title="Vue constante sur les ÈlÈments gÈomÈtriques de type GeomType::Hexaedron8.">Hexaedron8ElementConstView</a> comme param√®tre.</li>
<li>si on a besoin en plus des coordonn√©es des noeuds, des coordonn√©es des centres des faces, du milieu des ar√™tes ou du centre de l'√©l√©ment, il faut utiliser une vue sur une forme. Si on ne connait pas exactement le type de la forme, il faut utiliser un GeomShapeView. Si on connait le type exacte, il faut utiliser la vue correspondante. Par exemple, pour un quadrangle, un <a class="el" href="../../dd/df5/classQuad4ShapeView.html" title="Vue spÈcifique sur les formes gÈomÈtriques de type GeomType::Quad4.">Quad4ShapeView</a>.</li>
</ul>
<p>Il existe aussi une class GeomShapeOperation qui permet d'obtenir une classe qui impl√©mente IItemOperationByBasicType en fournissant uniquement les op√©rations pour une type de vue donn√©es (voir la documentation de GeomShapeOperation pour plus d'informations)</p>
<h2><a class="anchor" id="arcanedoc_cea_geometric_geomelementview"></a>
Utilisation des vues sur les √©l√©ments g√©om√©triques.</h2>
<p>Les vues sur les √©l√©ments doivent √™tre utilis√©es partout o√π c'est possible, notamment au lieu de passer <em>N</em> coordonn√©es en argument. Par exemple, pour une m√©thode de calcul de la surface d'un quadrangle, au lieu de: </p><div class="fragment"><div class="line"><a class="code" href="../../d5/d60/namespaceArccore.html#a5ab7f6a9c189227a5006d3f222aa61f6">Real</a> computeSurface2D(<span class="keyword">const</span> Real3&amp; a0, <span class="keyword">const</span> Real3&amp; a1,</div>
<div class="line">                      <span class="keyword">const</span> Real3&amp; a2, <span class="keyword">const</span> Real3&amp; a3)</div>
<div class="line">{  </div>
<div class="line">  Real3 fst_diag = a2 - a0;</div>
<div class="line">  Real3 snd_diag = a3 - a1;</div>
<div class="line">  <span class="keywordflow">return</span> 0.5 * math::crossProduct2D(fst_diag,snd_diag);</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceArccore_html_a5ab7f6a9c189227a5006d3f222aa61f6"><div class="ttname"><a href="../../d5/d60/namespaceArccore.html#a5ab7f6a9c189227a5006d3f222aa61f6">Arccore::Real</a></div><div class="ttdeci">double Real</div><div class="ttdoc">Type repr√©sentant un r√©el.</div><div class="ttdef"><b>Definition:</b> ArccoreGlobal.h:214</div></div>
</div><!-- fragment --><p>il vaut mieux utiliser:</p>
<div class="fragment"><div class="line"><a class="code" href="../../d5/d60/namespaceArccore.html#a5ab7f6a9c189227a5006d3f222aa61f6">Real</a> computeSurface2D(<a class="code" href="../../d0/d35/classQuad4ElementConstView.html">Quad4ElementConstView</a> quad)</div>
<div class="line">{  </div>
<div class="line">  Real3 fst_diag = quad[2] - quad[0];</div>
<div class="line">  Real3 snd_diag = quad[3] - quad[1];</div>
<div class="line">  <span class="keywordflow">return</span> 0.5 * math::crossProduct2D(fst_diag,snd_diag);</div>
<div class="line">}</div>
</div><!-- fragment --><p>L'int√©r√™t d'utiliser la vue est multiple:</p><ul>
<li>Les √©l√©ments et formes g√©om√©triques peuvent facilement √™tre convertibles en une vue: <div class="fragment"><div class="line"><span class="comment">// Utilisation avec un √©l√©ment g√©om√©trique.</span></div>
<div class="line"><a class="code" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a> my_quad;</div>
<div class="line">computeSurface2D(my_quad);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Utilisation avec une forme g√©om√©trique</span></div>
<div class="line">GeomShapeMng&amp; shape_mng;</div>
<div class="line">Cell cell;</div>
<div class="line">GeomShapeView shape_view;</div>
<div class="line">shape_mng.initShape(shape_view,cell);</div>
<div class="line">computeSurface2D(shape_view.toQuad4Element());</div>
</div><!-- fragment --></li>
<li>il est possible de cr√©er une vue √† partir de <em>N</em> coordonn√©es: <div class="fragment"><div class="line"><span class="comment">// Utilisation √† partir de 4 r√©els</span></div>
<div class="line">Real3 a0,a1,a2,a3;</div>
<div class="line">computeSurface2D(<a class="code" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a>(a0,a1,a2,a3));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Utilisation √† partir d&#39;un tableau de 4 r√©els</span></div>
<div class="line">Real3 a[4];</div>
<div class="line">computeSurface2D(<a class="code" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a>(<a class="code" href="../../d0/d32/namespaceArcane.html#a1b24b7dafa10abc75de484e5c7597bd3">Real3ConstArrayView</a>(4,a)));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Utilisation √† partir des coordonn√©es d&#39;une entit√©.</span></div>
<div class="line"><a class="code" href="../../d3/d00/group__Variable.html#ga98c3f361d93bc122a383a05c80a966b7">VariableNodeReal3</a>&amp; node_coords;</div>
<div class="line">Face face;</div>
<div class="line">computeSurface2D(<a class="code" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a>(node_coords,face));</div>
<div class="ttc" id="agroup__Variable_html_ga98c3f361d93bc122a383a05c80a966b7"><div class="ttname"><a href="../../d3/d00/group__Variable.html#ga98c3f361d93bc122a383a05c80a966b7">Arcane::VariableNodeReal3</a></div><div class="ttdeci">MeshVariableScalarRefT&lt; Node, Real3 &gt; VariableNodeReal3</div><div class="ttdoc">Grandeur au noeud de type coordonn√©es.</div><div class="ttdef"><b>Definition:</b> VariableTypedef.h:359</div></div>
<div class="ttc" id="anamespaceArcane_html_a1b24b7dafa10abc75de484e5c7597bd3"><div class="ttname"><a href="../../d0/d32/namespaceArcane.html#a1b24b7dafa10abc75de484e5c7597bd3">Arcane::Real3ConstArrayView</a></div><div class="ttdeci">ConstArrayView&lt; Real3 &gt; Real3ConstArrayView</div><div class="ttdoc">Equivalent C d'un tableau √† une dimension de Real3.</div><div class="ttdef"><b>Definition:</b> UtilsTypes.h:598</div></div>
</div><!-- fragment --></li>
<li>possibilit√© de sp√©cialiser les op√©rations lorsqu'on utilise des templates et notamment de faire la distinction entre les op√©rations qui prennent le m√™me nombre de coorodonn√©es mais qui op√®rent sur des √©l√©ments diff√©rents (par exemple entre un Quad4 et un Tetraedron4)</li>
<li>√† terme, possibilit√© de vectoriser plus facilement.</li>
</ul>
<p>La vue sur les √©l√©ments g√©om√©triques permet donc d'unifier plusieurs m√©canismes d'appels et doit donc √™tre utilis√©e dans tous les cas o√π cela est possible (i.e. c'est √† dire tout le temps). En particulier, les m√©thodes qui prennent <em>N</em> coordonn√©es en argument peuvent toujours √™tre remplac√©es par une m√©thode qui prend une vue de l'√©l√©ment correspondant.</p>
<h2><a class="anchor" id="arcanedoc_cea_geometric_geomshapeview"></a>
Utilisation des GeomShapeView</h2>
<p>Les GeomShapeView sont optimis√©es pour les calculs g√©om√©triques au sein d'une maille. Il est donc pr√©f√©rable de les utiliser plut√¥t que d'aller chercher √† chaque fois les coordonn√©es des noeuds d'une maille en passant par la variable IMesh::nodesCoordinates(). En particulier, elles utilisent une structure de donn√©e qui est optimis√©e pour la gestion du cache et pour la vectorisation. De plus, elles permettront √† terme de g√©rer des formes g√©om√©triques correspondantes √† des √©l√©ments finis d'ordre 2 ou sup√©rieur.</p>
<p>Par exemple, pour r√©cup√©rer le milieu des noeuds 3 et 4 d'une maille: </p><div class="fragment"><div class="line"><span class="comment">// M√©thode classique</span></div>
<div class="line"><a class="code" href="../../d3/d00/group__Variable.html#ga98c3f361d93bc122a383a05c80a966b7">VariableNodeReal3</a>&amp; node_coord = ...;</div>
<div class="line"><a class="code" href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a>(icell,allCells()){</div>
<div class="line"> Cell cell = *icell;</div>
<div class="line"> Real3 middle = (node_coord[cell.node(3)] + node_coord[cell.node(4)]) / 2.0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// M√©thode optimis√©e.</span></div>
<div class="line">GeomShapeMng&amp; shape_mng = ...;</div>
<div class="line">GeomShapeView shape;</div>
<div class="line"><a class="code" href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a>(icell,allCells()){</div>
<div class="line"> shape_mng.initShape(shape,*icell);</div>
<div class="line"> Real3 middle = (shape.node(3) + shape.node(4)) / 2.0;</div>
<div class="line">}</div>
<div class="ttc" id="aItemEnumerator_8h_html_aaf5910d68ad8428248f844535ab071f3"><div class="ttname"><a href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a></div><div class="ttdeci">#define ENUMERATE_CELL(name, group)</div><div class="ttdoc">Enum√©rateur g√©n√©rique d'un groupe de mailles.</div><div class="ttdef"><b>Definition:</b> ItemEnumerator.h:328</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li>
    <li class="footer">G√©n√©r√© le Lundi 10 Octobre 2022 04:08:55 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
