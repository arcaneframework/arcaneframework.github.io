<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="../../logo_arcane.svg" type="image/svg+xml">
    <title>Arcane: Variable</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../user_colors.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
    <script type="text/javascript" src="../../script-helper.js"></script>
    <script type="text/javascript" src="../../script-resize.js"></script>
    <script type="text/javascript" src="../../script-num-lines-code.js"></script>
    <script type="text/javascript" src="../../script-config-theme.js"></script>
    <script type="text/javascript" src="../../script-edit-config-theme.js"></script>
    <script type="text/javascript" src="../../script-alternative-theme.js"></script>
    <script type="text/javascript">
      // On demande l'activation de la personnalisation de la page.
      var no_custom_theme = false;
      DoxygenAwesomeDarkModeToggle.title = "Thème clair/sombre";
      DoxygenAwesomeDarkModeToggle.init();
      DoxygenAwesomeFragmentCopyButton.title = "Copier le code dans le presse-papier";
      DoxygenAwesomeFragmentCopyButton.init();
      DoxygenAwesomeParagraphLink.init();
      DoxygenAwesomeInteractiveToc.init();
      DoxygenAwesomeTabs.init()
      waitElemForResizeSideNav();
      setOldSize();
      //waitItemExpandCurrent();
    </script>
  </head>
  <body>
    <!--BEGIN CORNER_GITHUB-->
    <!-- https://tholman.com/github-corners/ -->
    <a href="https://github.com/arcaneframework/framework" class="github-corner" aria-label="Voir les sources sur GitHub">
      <svg width="70" height="70" viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg>
    </a>
    <!--END CORNER_GITHUB-->
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectlogo">
                  <a href="../../index.html" title="Aller à la page principale">
                    <img alt="Logo" src="../../arcane_framework_small.webp" />
                  </a>
                </td>
              </tr>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">Arcane
                    <span id="projectnumber">&#160;v3.14.0.0</span>
                  </div>
                  <div id="projectbrief">Documentation utilisateur</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part -->
<!-- Généré par Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('df/d7e/arcanedoc_core_types_axl_variable.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Variable</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table des matières</h3>
<ul><li class="level1"><a href="#autotoc_md46">Caractéristiques</a><ul><li class="level2"><a href="#arcanedoc_core_types_axl_variable_types">Type de données</a></li>
<li class="level2"><a href="#arcanedoc_core_types_axl_variable_support">Support</a></li>
<li class="level2"><a href="#arcanedoc_core_types_axl_variable_dim">Dimension</a></li>
<li class="level2"><a href="#arcanedoc_core_types_axl_variable_cppclass">Classe C++ des variables scalaires, 1D ou 2D</a></li>
</ul>
</li>
<li class="level1"><a href="#arcanedoc_core_types_axl_variable_declare">Déclaration</a><ul><li class="level2"><a href="#autotoc_md47">Déclaration dans les fichiers AXL</a><ul><li class="level3"><a href="#autotoc_md48">Nom, type de donnée et support de la variable</a></li>
<li class="level3"><a href="#autotoc_md49">Dimensions de la variable</a></li>
<li class="level3"><a href="#autotoc_md50">Propriétés de la variable</a></li>
<li class="level3"><a href="#autotoc_md51">Exemple de déclaration de variables dans les fichiers AXL</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#arcanedoc_core_types_axl_variable_use">Utilisation des variables</a><ul><li class="level2"><a href="#autotoc_md52">Utilisation des variables scalaires, 1D et 2D</a><ul><li class="level3"><a href="#autotoc_md53">Variables scalaires</a></li>
<li class="level3"><a href="#autotoc_md54">Variables tableaux</a></li>
<li class="level3"><a href="#autotoc_md55">Variables scalaires sur le maillage</a></li>
<li class="level3"><a href="#autotoc_md56">Variables tableaux sur le maillage</a></li>
</ul>
</li>
<li class="level2"><a href="#arcanedoc_core_types_axl_md_variable_use">Utilisation des variables multi-dimensionnelles sur le maillage</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Une variable est une valeur manipulée par le code et gérée par Arcane. Par exemple le volume, la vitesse, sont des variables. Elles sont caractérisées par un <b>nom</b>, un <b>type de donnée</b>, un <b>support</b> et une <b>dimension</b>.</p>
<p>Les variables sont déclarées à l'intérieur d'un module/service, au sein du descripteur de module/service (pour la suite de cette page, on va dire que module = service, pour alléger l'écriture).</p>
<p>Si deux modules utilisent des variables de même nom, leurs valeurs seront implicitement partagées. C'est par ce moyen que les modules communiquent leurs informations.</p>
<h1><a class="anchor" id="autotoc_md46"></a>
Caractéristiques</h1>
<h2><a class="anchor" id="arcanedoc_core_types_axl_variable_types"></a>
Type de données</h2>
<p>Le <b>type de donnée</b> des variables est à choisir parmi les suivants :</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Nom C++   </th><th class="markdownTableHeadNone">Type    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d5/d60/namespaceArccore.html#a19fea02f94d4da203710fd2070c0f2fb">Integer</a>   </td><td class="markdownTableBodyNone">entier signé sur 32 bits    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d5/d60/namespaceArccore.html#aea63c14945a46a63ea30162be83b65ef">Int16</a>   </td><td class="markdownTableBodyNone">entier signé sur 16 bits    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d5/d60/namespaceArccore.html#ab32c98ae2c2cf8372feb620983bb5b67">Int32</a>   </td><td class="markdownTableBodyNone">entier signé sur 32 bits    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d5/d60/namespaceArccore.html#a7cde9b16416e2271fa90d200e7c9e276">Int64</a>   </td><td class="markdownTableBodyNone">entier signé sur 64 bits    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d0/d32/namespaceArcane.html#ab8a647feabd759fae601d29f827568ec">Byte</a>   </td><td class="markdownTableBodyNone">représente un caractère sur 8 bits    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d5/d60/namespaceArccore.html#a186895d3c679e34cffb1ecf0db5c3aaa">Real</a>   </td><td class="markdownTableBodyNone">réel IEEE 754    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d6/d24/classArcane_1_1Real2.html">Real2</a>   </td><td class="markdownTableBodyNone">coordonnée 2D, vecteur de deux réels    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d1/da6/classArcane_1_1Real3.html">Real3</a>   </td><td class="markdownTableBodyNone">coordonnée 3D, vecteur de trois réels    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../da/d4a/classArcane_1_1Real2x2.html">Real2x2</a>   </td><td class="markdownTableBodyNone">tenseur 2D, vecteur de quatre réels    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d9/da0/classArcane_1_1Real3x3.html">Real3x3</a>   </td><td class="markdownTableBodyNone">tenseur 3D, vecteur de neufs réels    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d2/ddb/classArccore_1_1String.html">String</a>   </td><td class="markdownTableBodyNone">chaîne de caractères unicode   </td></tr>
</table>
<p>Les flottants (<em>Real</em>, <em>Real2</em>, <em>Real2x2</em>, <em>Real3</em>, <em>Real3x3</em>) sont des réels double précisions (stockés sur 8 octets).</p>
<h2><a class="anchor" id="arcanedoc_core_types_axl_variable_support"></a>
Support</h2>
<p>Le <b>support</b> correspond à l'entité qui porte la variable, sur laquelle la variable est définie. Ces variables qui s'appliquent sur des éléments du maillage sont appelées des <b>grandeurs</b>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Nom C++   </th><th class="markdownTableHeadNone">Support    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">(vide)   </td><td class="markdownTableBodyNone">variable définie globalement (ex : pas de temps)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d8/dd7/classArcane_1_1Node.html">Node</a>   </td><td class="markdownTableBodyNone">noeud du maillage    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d1/db1/classArcane_1_1Face.html">Face</a>   </td><td class="markdownTableBodyNone">face du maillage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d9/db2/classArcane_1_1Cell.html">Cell</a>   </td><td class="markdownTableBodyNone">maille du maillage    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../dd/d6c/classArcane_1_1Particle.html">Particle</a>   </td><td class="markdownTableBodyNone">particule du maillage    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d0/d6c/classArcane_1_1DoF.html">DoF</a>   </td><td class="markdownTableBodyNone">degré de liberté   </td></tr>
</table>
<h2><a class="anchor" id="arcanedoc_core_types_axl_variable_dim"></a>
Dimension</h2>
<p>La <b>dimension</b> peut être :</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Nom C++   </th><th class="markdownTableHeadNone">Dimension    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Scalar</b>   </td><td class="markdownTableBodyNone">scalaire    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Array</b>   </td><td class="markdownTableBodyNone">tableau 1D    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Array2</b>   </td><td class="markdownTableBodyNone">tableau 2D   </td></tr>
</table>
<p>Depuis la version 3.8.11 de Arcane il est aussi possible de déclarer des variables muti-dimensionnelles sur le maillage.</p>
<h2><a class="anchor" id="arcanedoc_core_types_axl_variable_cppclass"></a>
Classe C++ des variables scalaires, 1D ou 2D</h2>
<p>Pour les variables scalaires, 1D ou 2D, il est aisé d'obtenir la classe C++ correspondant à un type de donnée, un support et à une dimension donnée. Le nom de la classe est construit de la manière suivante :</p>
<p><b>Variable</b> + <a class="el" href="../../df/d7e/arcanedoc_core_types_axl_variable.html#arcanedoc_core_types_axl_variable_support">Support</a> + <a class="el" href="../../df/d7e/arcanedoc_core_types_axl_variable.html#arcanedoc_core_types_axl_variable_dim">Dimension</a> + <a class="el" href="../../df/d7e/arcanedoc_core_types_axl_variable.html#arcanedoc_core_types_axl_variable_types">Type de données</a></p>
<p>Par exemple, pour une variable représentant un tableau d'entiers <b>VariableArrayInteger</b>, pour une variable représentant un réel <b>VariableScalarReal</b>.</p>
<p>Quand une variable scalaire est définie sur une entité du maillage le support (<em>Scalar</em>) n'est pas précisé. Par exemple, pour une variable représentant un réel aux mailles <b>VariableCellReal</b>.</p>
<p>Toutes les combinaisons sont possibles aux exceptions suivantes :</p><ul>
<li>les variables de type <em>chaîne de caractères</em> qui n'existent que pour les genres scalaires et tableaux mais pas sur les éléments du maillage (pour des raisons de performances).</li>
<li>Les variables de dimension 2 ne peuvent pas avoir de support (il n'est pas possible d'avoir des variables 2D aux mailles par exemple).</li>
</ul>
<p>Le tableau suivant donne quelques exemples de variables :</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Nom C++   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#gae100d56dd1a1231ec970073bcf0572da">VariableScalarReal</a>   </td><td class="markdownTableBodyNone">un réel    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#gaffd64d38d2546b294fcf9fc05aa3c465">VariableScalarInteger</a>   </td><td class="markdownTableBodyNone">un entier    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#ga6d109da7bef7d823687f9636c8935da8">VariableArrayInteger</a>   </td><td class="markdownTableBodyNone">Tableau d'entiers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#ga964ae3a2259afb2022336cbd549194d5">VariableArrayReal3</a>   </td><td class="markdownTableBodyNone">Tableau de coordonnées 3D    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#ga8a3da822e65f4631b8d9b9f3987c2352">VariableNodeReal2</a>   </td><td class="markdownTableBodyNone">Coordonnée 2D aux noeuds    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#ga53dac1124aca5fcb6c634530641608b4">VariableFaceReal</a>   </td><td class="markdownTableBodyNone">Réel aux faces    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#gadca3b7b1011b6f67f4b619cf0f1e3090">VariableFaceReal3</a>   </td><td class="markdownTableBodyNone">Coordonnée 3D aux faces    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#ga27dcbd39bdd8ac855e592c23518d6db9">VariableFaceArrayInteger</a>   </td><td class="markdownTableBodyNone">Tableau d'entiers aux faces    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#gaee6feded16c556185773d761fc09796f">VariableCellArrayReal</a>   </td><td class="markdownTableBodyNone">Tableau de réels aux mailles    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#gaf7f4a257c36daa5cc99309395e330d81">VariableCellArrayReal3</a>   </td><td class="markdownTableBodyNone">Tableau de coordonnées 3D aux mailles    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../d3/d00/group__Variable.html#gaadbc21e4c4f4dd3106b27be9bd964694">VariableCellArrayReal2x2</a>   </td><td class="markdownTableBodyNone">Tableau de tenseurs 2D aux mailles   </td></tr>
</table>
<p>Pour les variables multi-dimensionnelles, il n'existe pas de <code>typedef</code> car le nombre de possibilités est infini.</p>
<h1><a class="anchor" id="arcanedoc_core_types_axl_variable_declare"></a>
Déclaration</h1>
<p>La déclaration des variables se fait par l'intermédiaire du descripteur de module ou du service (fichier AXL) ou directement dans le code.</p>
<h2><a class="anchor" id="autotoc_md47"></a>
Déclaration dans les fichiers AXL</h2>
<dl class="section note"><dt>Note</dt><dd>Les variables déclarées dans le fichier AXL sont toujours associées au maillage par défaut du module ou du service. Il n'est pas possible de déclarer de variables de sous-domaine dans ces fichiers (mais il est toujours possible de les déclarer explicitement dans la classe du module ou du service).</dd></dl>
<p>Dans le fichier AXL, la déclaration des variables se fait dans la balise <code>variables</code>. L'exemple suivant montre la déclaration dans le module <code>Test</code> d'une variable de type réel aux mailles appelée <code>Pressure</code> et une variable de type réel aux noeuds appelée <code>NodePressure</code>.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Test&quot;</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">name</span> <span class="keyword">lang</span>=<span class="stringliteral">&quot;fr&quot;</span>&gt;<span class="keyword">Test</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">description</span>&gt;<span class="keyword">Descripteur</span> <span class="keyword">du</span> <span class="keyword">module</span> <span class="keyword">Test</span>&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">variables</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;pressure&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Pressure&quot;</span> <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span></div>
<div class="line">              <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">dim</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">dump</span>=<span class="stringliteral">&quot;true&quot;</span> <span class="keyword">need-sync</span>=<span class="stringliteral">&quot;true&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;node_pressure&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;NodePressure&quot;</span> <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span></div>
<div class="line">              <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;node&quot;</span> <span class="keyword">dim</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">dump</span>=<span class="stringliteral">&quot;true&quot;</span> <span class="keyword">need-sync</span>=<span class="stringliteral">&quot;true&quot;</span> /&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">variables</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">entry-points</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">entry-points</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">options</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">options</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">module</span>&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md48"></a>
Nom, type de donnée et support de la variable</h3>
<p>Les attributs suivants sont obligatoires et permettent de définir le nom, le type de donnée et le support de la variable :</p>
<table class="doxtable">
<tr>
<th>Attribut </th><th>Description  </th></tr>
<tr>
<td><b>name</b>  </td><td>nom de la variable. Par convention, elle commence par une majuscule. Les caractères valides sont les caractères alphabétiques <b>[a-zA-Z]</b>, les chiffres (sauf au début du nom) et le caractère souligné. Les variables dont le nom commence par <em>Global</em> et <em>Arcane</em> sont réservées pour Arcane.   </td></tr>
<tr>
<td><b>field-name</b>  </td><td>nom informatique du champ de la variable dans la classe générée. Ce nom doit être un nom valide en C++. Par convention, si la variable s'appelle <em>NodePressure</em> par exemple, le champ sera <b>node_pressure</b>. Dans la classe générée, le nom spécifié sera préfixé de <b>m_</b> (le préfixage <code>m_</code> correspond aux <a class="el" href="../../da/d3b/arcanedoc_general_codingrules.html">règles de codage</a> dans Arcane pour les attributs de classe).   </td></tr>
<tr>
<td><b>item-kind</b>  </td><td><p class="starttd">support de la variable. Les valeurs possibles sont <code>node</code>, <code>edge</code>, <code>face</code>, <code>cell</code>, <code>particle</code>, <code>dof</code> ou <code>none</code>. La valeur <code>none</code> indique qu'il ne s'agit pas d'une variable du maillage. Si le type est <code>particle</code> ou <code>dof</code>, il faut spécifier l'attribut <b>family-name</b>  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>data-type</b>  </td><td><p class="starttd">type de données de la variable. Il s'agit au choix de <em>integer</em>, <em>int16</em>, <em>int32</em>, <em>int64</em>, <em>real</em>, <em>string</em>, <em>real2</em>, <em>real3</em>, <em>real2x2</em>, <em>real3x3</em>. Le type *string8 n'est pas utilisable pour les variables du maillage (celles ayant un support).  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>family-name</b>  </td><td><p class="starttd">nom de la famille d'entité (<a class="el" href="../../dd/d0a/classArcane_1_1IItemFamily.html">IItemFamily</a> auquel la variable est associée. Cet attribut n'est valide que si <b>item-kind</b> vaut <code>particle</code> ou <code>dof</code>.  </p>
<p class="endtd"></p>
</td></tr>
</table>
<h3><a class="anchor" id="autotoc_md49"></a>
Dimensions de la variable</h3>
<p>Les attributs suivants permettent de définir la dimension de la variable.</p>
<dl class="section note"><dt>Note</dt><dd>Les valeurs <b>shape-dim</b>, <b>extent0</b> et <b>extent1</b> sont uniquement disponibles à partir de la version 3.8.11 de Arcane.</dd></dl>
<p>Si aucun des attributs suivants n'est défini, alors on considère que la variable est une variable scalaire comme si la valeur <b>dim="0"</b> avait été spécifiée.</p>
<p>Il faut spécifier soit <b>dim</b> (pour les variables classiques scalaires, 1D ou 2D, soit <b>shape-dim</b> pour les variables multi-dimensionnelles.</p>
<table class="doxtable">
<tr>
<th>Attribut </th><th><p class="starttd">Description </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td><b>dim</b>  </td><td><p class="starttd">La dimension de la variable pour les variables scalaires, 1D ou 2D.Les valeurs possibles sont <em>0</em> pour une variable scalaire, <em>1</em> pour une variable tableau à une dimension et <em>2</em> pour un tableau à deux dimensions. Les tableaux à deux dimensions ne sont pas supportés pour les variables du maillage.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>shape-dim</b>  </td><td><p class="starttd">La dimension de la variable pour les variables multi-dimensionnelles. Les valeurs possibles sont 0, 1, 2 ou 3.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>extent0</b>  </td><td><p class="starttd">Nombre d'élément pour une variable multi-dimension dont les éléments sont des vecteurs ou nombre de lignes pour une variable multi-dimension dont les éléments sont des matrices. Cet attribut ne peut être utilisé que si <b>shape-dim</b> est présent.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>extent1</b>  </td><td><p class="starttd">Nombre de colonnes pour une variable multi-dimension dont les éléments sont des matrices. Cet attribut ne peut être utilisé que si <b>shape-dim</b> est présent.  </p>
<p class="endtd"></p>
</td></tr>
</table>
<h3><a class="anchor" id="autotoc_md50"></a>
Propriétés de la variable</h3>
<p>Les attributs suivants sont optionnels et permettent de spécifier des propriétés sur la variable:</p>
<table class="doxtable">
<tr>
<th>Attribut </th><th><p class="starttd">Description </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td><b>dump</b>  </td><td><p class="starttd">permet de choisir si les valeurs d'une variable sont sauvegardées lors d'un arrêt du code. Dans ce cas, les valeurs sauvegardées seront, bien entendu, relues lors d'une reprise d'exécution. Certaines variables recalculées n'ont pas besoin d'être sauvegardées ; dans ce cas l'attribut <em>dump</em> vaut <em>false</em>. C'est le cas lorsque la valeur d'une variable n'est pas utile d'une itération à l'autre.  </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>need-sync</b>  </td><td><p class="starttd">indique si la variable doit être synchronisé entre sous-domaines. Il s'agit juste d'une indication qui peut être utilisée lors de vérifications.  </p>
<p class="endtd"></p>
</td></tr>
</table>
<p>Lors de la compilation du descripteur de module par Arcane (avec <code>axl2cc</code> - cf précédemment), les variables sont enregistrées au sein de la base de données de l'architecture.</p>
<h3><a class="anchor" id="autotoc_md51"></a>
Exemple de déclaration de variables dans les fichiers AXL</h3>
<div class="fragment"><div class="line"><span class="comment">&lt;!-- Variable scalaire aux noeuds de &#39;Real&#39; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;node_mass&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;NodeMass&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;node&quot;</span> <span class="keyword">dim</span>=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable scalaire aux mailles de &#39;Int64&#39; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;cell_unique_id&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;UniqueId&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;int64&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">dim</span>=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable 1D aux mailles de &#39;Real3&#39; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;cell_cqs&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;CellCQS&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real3&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">dim</span>=<span class="stringliteral">&quot;1&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable scalaire aux particules de &#39;Real&#39; sur la famille &#39;ArcaneParticles&#39; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;particle_temperature&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Temperature&quot;</span> <span class="keyword">family-name</span>=<span class="stringliteral">&quot;ArcaneParticles&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;particle&quot;</span> <span class="keyword">dim</span>=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 0D aux mailles de &#39;Real&#39; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar0d&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar0D&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 1D aux mailles de &#39;Real&#39; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar1d&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar1D&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;1&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 2D aux mailles de &#39;Real&#39; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar2d&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar2D&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;2&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 2D aux mailles de &#39;Real&#39; vue comme une variable 3D --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar2d_as_3d&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar2D&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;3&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 0D aux mailles de NumVector&lt;Real,2&gt; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar0d_vector2&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar0DVector2&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real2&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 1D aux faces de NumVector&lt;Real,3&gt; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar1d_vector3&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar1DVector3&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real3&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;face&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;1&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 2D aux faces de NumVector&lt;Real,4&gt; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar2d_vector4&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar2DVector4&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;face&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;2&quot;</span> <span class="keyword">extent0</span>=<span class="stringliteral">&quot;4&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 0D aux noeuds de NumMatrix&lt;Real,2,2&gt; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar0d_matrix2x2&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar0DMatrixReal2x2&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real2x2&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;node&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;0&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 1D aux mailles de NumMatrix&lt;Real,3,3&gt; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar1d_matrix3x3&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar1DMatrixReal3x3&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real3x3&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;1&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 1D aux mailles de NumMatrix&lt;Real,2,6&gt; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar1d_matrix2x6&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar1DMatrix2x6&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;1&quot;</span> <span class="keyword">extent0</span>=<span class="stringliteral">&quot;2&quot;</span> <span class="keyword">extent1</span>=<span class="stringliteral">&quot;6&quot;</span>/&gt;</div>
<div class="line"> </div>
<div class="line"><span class="comment">&lt;!-- Variable multi-dim 0D aux mailles de NumMatrix&lt;Real,3,2&gt; --&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">variable</span> <span class="keyword">field-name</span>=<span class="stringliteral">&quot;mdvar0d_matrix3x2&quot;</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MDVar0DMatrix3x2&quot;</span></div>
<div class="line">          <span class="keyword">data-type</span>=<span class="stringliteral">&quot;real&quot;</span> <span class="keyword">item-kind</span>=<span class="stringliteral">&quot;cell&quot;</span> <span class="keyword">shape-dim</span>=<span class="stringliteral">&quot;0&quot;</span> <span class="keyword">extent0</span>=<span class="stringliteral">&quot;3&quot;</span> <span class="keyword">extent1</span>=<span class="stringliteral">&quot;2&quot;</span>/&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="arcanedoc_core_types_axl_variable_use"></a>
Utilisation des variables</h1>
<h2><a class="anchor" id="autotoc_md52"></a>
Utilisation des variables scalaires, 1D et 2D</h2>
<p>La manière d'utiliser une variable est identique quel que soit son type et ne dépend que de son genre.</p>
<h3><a class="anchor" id="autotoc_md53"></a>
Variables scalaires</h3>
<p>Les variables scalaires sont utilisées par l'intermédiaire de la classe template <a class="el" href="../../d0/db7/classArcane_1_1VariableRefScalarT.html">VariableRefScalarT</a>.</p>
<p>Il n'y a que deux possibilités d'utilisation :</p>
<ul>
<li>"lire la valeur" : cela se fait par l'opérateur() (<a class="el" href="../../d0/db7/classArcane_1_1VariableRefScalarT.html#a311ddc0ec1d58945283d8e464703c3c4">VariableRefScalarT::operator()()</a>). Cet opérateur retourne une référence constante sur la valeur stockée dans la variable. Il peut être utilisé partout ou l'on veut utiliser une valeur du type de la variable.</li>
<li>"changer la valeur" : cela se fait par l'opérateur = (VariableRefScalarT::operator=())</li>
</ul>
<p>Par exemple, avec la variable <code>m_time</code> de type <code>VariableScalarReal</code> :</p>
<div class="fragment"><div class="line">m_time = 5.0;        <span class="comment">// affecte la valeur 5. à la variable m_time</span></div>
<div class="line"><span class="keywordtype">double</span> z = m_time(); <span class="comment">// récupère la valeur de la variable et l&#39;affecte à z.</span></div>
<div class="line">cout &lt;&lt; m_time();    <span class="comment">// imprime la valeur de m_time</span></div>
</div><!-- fragment --><p>L'important est de ne pas oublier les parenthèses lorsqu'on veut accéder à la valeur de la variable.</p>
<h3><a class="anchor" id="autotoc_md54"></a>
Variables tableaux</h3>
<p>Les variables tableaux sont utilisées par l'intermédiaire de la classe template <a class="el" href="../../d8/d30/classArcane_1_1VariableRefArrayT.html">VariableRefArrayT</a>.</p>
<p>Leur fonctionnement est assez similaire à la classe <code>vector</code> de la STL. Le dimensionnement du tableau se fait par la méthode <a class="el" href="../../d8/d30/classArcane_1_1VariableRefArrayT.html#ab6a547ffc70e3c72e395f55f812ad2e2">VariableRefArrayT::resize()</a> et chaque élément du tableau peut être accédé par l'opérateur <a class="el" href="../../d7/d02/classArccore_1_1ArrayView.html#acd7b7f6238da4b76800b781f8a48d71f">VariableRefArrayT::operator[]()</a> qui retourne une référence sur le type des éléments du tableau.</p>
<p>Par exemple, avec la variable <em>m_times</em> de type <a class="el" href="../../d3/d00/group__Variable.html#ga33aa7e1e60a9b8b0883b23eee8d7f82d">VariableArrayReal</a> :</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="../../d3/d00/group__Variable.html#ga33aa7e1e60a9b8b0883b23eee8d7f82d">Arcane::VariableArrayReal</a> m_times = ...;</div>
<div class="line">m_times.resize(5);         <span class="comment">// redimensionne le tableau pour contenir 5 éléments</span></div>
<div class="line">m_times[3] = 2.0;          <span class="comment">// affecte la valeur 2.0 au 4ème élément du tableau</span></div>
<div class="line">cout &lt;&lt; m_times[0];        <span class="comment">// imprime la valeur du premier élément</span></div>
<div class="ttc" id="agroup__Variable_html_ga33aa7e1e60a9b8b0883b23eee8d7f82d"><div class="ttname"><a href="../../d3/d00/group__Variable.html#ga33aa7e1e60a9b8b0883b23eee8d7f82d">Arcane::VariableArrayReal</a></div><div class="ttdeci">VariableRefArrayT&lt; Real &gt; VariableArrayReal</div><div class="ttdoc">Variable tableau de type réels.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/dc7/VariableTypedef_8h_source.html#l00134">VariableTypedef.h:134</a></div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md55"></a>
Variables scalaires sur le maillage</h3>
<p>Il s'agit des variables sur les éléments du maillage (noeuds, faces ou mailles) avec une valeur par élément. Ces variables sont définies par la classe template <a class="el" href="../../d7/d20/classArcane_1_1MeshVariableScalarRefT.html">MeshVariableScalarRefT</a>.</p>
<p>Leur fonctionnement est assez similaire à celui d'un tableau C standard. On utilise l'opérateur <a class="el" href="../../d7/d02/classArccore_1_1ArrayView.html#acd7b7f6238da4b76800b781f8a48d71f">VariableRefArrayT::operator[]()</a> pour récupérer une référence sur le type de la variable pour un élément du maillage donné. Cet opérateur est surchargé pour prendre en argument un itérateur sur un élément du maillage.</p>
<p>Les grandeurs se déclarent et s'utilisent de manière similaire quel que soient le type d'élément du maillage. Elles sont dimensionnées automatiquement lors de l'initialisation au nombre d'éléments du maillage du genre de la variable.</p>
<p>Par exemple, avec la variable <em>m_volume</em> de type <a class="el" href="../../d3/d00/group__Variable.html#ga135a2515548fbcacb89c3ce1a2410b79">VariableCellReal</a>:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../d7/d20/classArcane_1_1MeshVariableScalarRefT.html">Arcane::VariableCellReal</a> m_volume = ...;</div>
<div class="line"><a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a>(icell,allCells()) {</div>
<div class="line">  m_temperature[icell] = 2.0;     <span class="comment">// Affecte la valeur 2.0 au volume de la maille courante</span></div>
<div class="line">  cout &lt;&lt; m_temperature[icell];   <span class="comment">// Imprime le volume de la maille courante</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// il est possible de faire les mêmes opérations avec la maille</span></div>
<div class="line">  <span class="comment">// ATTENTION c&#39;est moins performant</span></div>
<div class="line">  m_temperature[icell] = 2.0;  <span class="comment">// Affecte la valeur 2.0 au volume de la maille &#39;cell&#39;</span></div>
<div class="line">  cout &lt;&lt; m_temperature[icell];    <span class="comment">// Imprime le volume de la maille &#39;cell&#39;</span></div>
<div class="line">}</div>
<div class="ttc" id="aItemEnumerator_8h_html_aaf5910d68ad8428248f844535ab071f3"><div class="ttname"><a href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a></div><div class="ttdeci">#define ENUMERATE_CELL(name, group)</div><div class="ttdoc">Enumérateur générique d'un groupe de mailles.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d0f/ItemEnumerator_8h_source.html#l00427">ItemEnumerator.h:427</a></div></div>
<div class="ttc" id="aclassArcane_1_1MeshVariableScalarRefT_html"><div class="ttname"><a href="../../d7/d20/classArcane_1_1MeshVariableScalarRefT.html">Arcane::MeshVariableScalarRefT&lt; Cell, Real &gt;</a></div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md56"></a>
Variables tableaux sur le maillage</h3>
<p>Il s'agit des variables sur les éléments du maillage (noeuds, faces ou mailles) avec un tableau de valeurs par éléments. Ces variables sont définies par la classe template <a class="el" href="../../dd/d95/classArcane_1_1MeshVariableArrayRefT.html">MeshVariableArrayRefT</a>.</p>
<p>Le fonctionnement de ces variables est identique à celui des variables scalaires sur le maillage mais l'opérateur <a class="el" href="../../dd/d95/classArcane_1_1MeshVariableArrayRefT.html#ada0a569c94d7323f136f42b56e059374">MeshVariableArrayRefT::operator[]()</a> retourne un tableau de valeurs du type de la variable.</p>
<p>Il est possible de changer le nombre d'éléments de la deuxième dimension de ce tableau par la méthode MeshVariableArrayRefT::resize().</p>
<p>Par exemple, avec la variable <em>m_temperature</em> de type <a class="el" href="../../d3/d00/group__Variable.html#gaee6feded16c556185773d761fc09796f">VariableCellArrayReal</a>:</p>
<div class="fragment"><div class="line"><a class="code hl_typedef" href="../../d3/d00/group__Variable.html#gaee6feded16c556185773d761fc09796f">Arcane::VariableCellArrayReal</a> m_temperature = ...;</div>
<div class="line">m_temperature.resize(3); <span class="comment">// Chaque maille aura 3 valeurs de temperature</span></div>
<div class="line"><a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a>(icell,allCells()) {</div>
<div class="line">  <span class="comment">// Affecte la valeur 2.0 à la première temperature de la maille courante</span></div>
<div class="line">  m_temperature[icell][0] = 2.0;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Imprime la 2-ème température de la maille courante</span></div>
<div class="line">  info() &lt;&lt; m_temperature[icell][1];</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Il est possible de faire les mêmes opérations avec la maille</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Déclare une référence à une maille.</span></div>
<div class="line">  Cell cell = *icell;</div>
<div class="line">  <span class="comment">// Affecte la valeur 2.0 à la première temperature de la maille &#39;cell&#39;</span></div>
<div class="line">  m_temperature[cell][0] = 2.0;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Affecte la valeur 4.0 à la 3-ème temperature de la maille &#39;cell&#39;</span></div>
<div class="line">  m_temperature(cell,2) = 4.0;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Imprime la 2-ème température de la maille &#39;cell&#39;</span></div>
<div class="line">  info() &lt;&lt; m_temperature[cell][1];</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Variable_html_gaee6feded16c556185773d761fc09796f"><div class="ttname"><a href="../../d3/d00/group__Variable.html#gaee6feded16c556185773d761fc09796f">Arcane::VariableCellArrayReal</a></div><div class="ttdeci">MeshVariableArrayRefT&lt; Cell, Real &gt; VariableCellArrayReal</div><div class="ttdoc">Grandeur au centre des mailles de type tableau de réel.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/dc7/VariableTypedef_8h_source.html#l00778">VariableTypedef.h:778</a></div></div>
</div><!-- fragment --><h2><a class="anchor" id="arcanedoc_core_types_axl_md_variable_use"></a>
Utilisation des variables multi-dimensionnelles sur le maillage</h2>
<dl class="section warning"><dt>Avertissement</dt><dd>Les variables multi-dimensionnelles sont une fonctionnalité expérimentale et l'API n'est pas encore figé. Le code actuel n'est pas garanti de pouvoir être utilisé dans une version ultérieure de Arcane. De même, certains mécanismes impliquants ces variables (comme le dépouillement) peuvent ne pas être complètement opérationnels.</dd></dl>
<p>A partir de la version 3.8.11 de Arcane il est possible d'utiliser des variables multi-dimensionnelles sur la maillage. Ces variables unifient l'utilisation des variables quelle que soit leur dimension et permettent de supporter jusqu'à 3 dimensions (à noter que cette valeur pourra probablement être augmentée dans une future version.</p>
<dl class="section note"><dt>Note</dt><dd>Pour l'instant ces variables ont forcément le type de donnée Real.</dd></dl>
<p>Il existe trois types d'éléments pour les variables multi-dimensionnelles :</p><ul>
<li>les scalaires <a class="el" href="../../de/db5/classArcane_1_1MeshMDVariableRefT.html">MeshMDVariableRefT</a></li>
<li>les vecteurs MeshVectorMDVariableRefT</li>
<li>les matrices MeshMatrixMDVariableRefT</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Nom C++   </th><th class="markdownTableHeadNone">Type d'élément   </th><th class="markdownTableHeadNone">Dimension maximale    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="../../de/db5/classArcane_1_1MeshMDVariableRefT.html">MeshMDVariableRefT</a>   </td><td class="markdownTableBodyNone">scalaire   </td><td class="markdownTableBodyNone">3    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MeshVectorMDVariableRefT   </td><td class="markdownTableBodyNone">vecteur   </td><td class="markdownTableBodyNone">2    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MeshMatrixMDVariableRefT   </td><td class="markdownTableBodyNone">matrice   </td><td class="markdownTableBodyNone">1   </td></tr>
</table>
<p>Ces trois variables ont une classe de base commune <a class="el" href="../../df/dd4/classArcane_1_1MeshMDVariableRefBaseT.html">MeshMDVariableRefBaseT</a>.</p>
<p>L'utilisation est similaire quel que soit le type de l'élément. L'accès se fait via l'opérateur <code>operator()</code> car il permet d'avoir plusieurs arguments. A partir du C++23 il sera aussi possible d'utiliser l'opérateur <code>operator[]</code>.</p>
<p>Avant d'utiliser ces variables, il est nécessaire d'appeler la méthode <a class="el" href="../../de/db5/classArcane_1_1MeshMDVariableRefT.html#aeabe8501eb4d00c5eec6466a879ddd59">MeshMDVariableRefT::reshape()</a>. Le nombre de valeurs à spécifier doit être identique à la dimension de la variable.</p>
<p>Exemple pour les variables multi-dimensionnelles scalaires:</p>
<div class="fragment"><div class="line">  <span class="comment">// Déclare une variable 2D aux mailles de type Real</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// La déclaration équivalente dans le fichier AXL est:</span></div>
<div class="line">  <span class="comment">// &lt;variable field-name=&quot;cell_var_2d&quot; name=&quot;Var1&quot;</span></div>
<div class="line">  <span class="comment">//           data-type=&quot;real&quot; item-kind=&quot;cell&quot; shape-dim=&quot;2&quot;</span></div>
<div class="line">  <span class="comment">// /&gt;</span></div>
<div class="line">  <a class="code hl_class" href="../../df/d8a/classArcane_1_1VariableBuildInfo.html">Arcane::VariableBuildInfo</a> vbi(VariableBuildInfo(mesh(), <span class="stringliteral">&quot;Var1&quot;</span>));</div>
<div class="line">  <a class="code hl_class" href="../../de/db5/classArcane_1_1MeshMDVariableRefT.html">Arcane::MeshMDVariableRefT&lt;Cell, Real, MDDim2&gt;</a> cell_var_2d(vbi);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Positionne les deux dimensions à 3x4.</span></div>
<div class="line">  <span class="comment">// Chaque maille aura 3x4 = 12 valeurs</span></div>
<div class="line">  cell_var_2d.reshape({ 3, 4 });</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#a44837b340ff8a4fc02299e3160a4da20">ENUMERATE_</a> (Cell, icell, allCells()) {</div>
<div class="line">    <span class="comment">// Positionne la valeur pour l&#39;indice (2,1)</span></div>
<div class="line">    cell_var_2d(icell, 2, 1) = 2.3;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Affiche la valeur pour l&#39;indice (2,1)</span></div>
<div class="line">    info() &lt;&lt; cell_var_2d(icell, 2, 1);</div>
<div class="line">  }</div>
<div class="ttc" id="aItemEnumerator_8h_html_a44837b340ff8a4fc02299e3160a4da20"><div class="ttname"><a href="../../d6/d0f/ItemEnumerator_8h.html#a44837b340ff8a4fc02299e3160a4da20">ENUMERATE_</a></div><div class="ttdeci">#define ENUMERATE_(type, name, group)</div><div class="ttdoc">Enumérateur générique d'un groupe d'entité</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d0f/ItemEnumerator_8h_source.html#l00407">ItemEnumerator.h:407</a></div></div>
<div class="ttc" id="aclassArcane_1_1MeshMDVariableRefT_html"><div class="ttname"><a href="../../de/db5/classArcane_1_1MeshMDVariableRefT.html">Arcane::MeshMDVariableRefT</a></div><div class="ttdoc">Classe gérant une variable multi-dimension sur une entité du maillage.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d6f/MeshMDVariableRef_8h_source.html#l00146">MeshMDVariableRef.h:148</a></div></div>
<div class="ttc" id="aclassArcane_1_1VariableBuildInfo_html"><div class="ttname"><a href="../../df/d8a/classArcane_1_1VariableBuildInfo.html">Arcane::VariableBuildInfo</a></div><div class="ttdoc">Paramètres nécessaires à la construction d'une variable.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d1d/VariableBuildInfo_8h_source.html#l00042">VariableBuildInfo.h:43</a></div></div>
</div><!-- fragment --><p>Exemple pour les variables multi-dimensionnelles vectorielles:</p>
<div class="fragment"><div class="line">  <span class="comment">// Déclare une variable 2D aux mailles d&#39;un vecteur de 7 Real</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// La déclaration équivalente dans le fichier AXL est:</span></div>
<div class="line">  <span class="comment">// &lt;variable field-name=&quot;cell_var_2d&quot; name=&quot;Var1&quot;</span></div>
<div class="line">  <span class="comment">//           data-type=&quot;real&quot; item-kind=&quot;cell&quot; shape-dim=&quot;2&quot;</span></div>
<div class="line">  <span class="comment">//           extent0=&quot;7&quot;</span></div>
<div class="line">  <span class="comment">// /&gt;</span></div>
<div class="line">  <a class="code hl_class" href="../../df/d8a/classArcane_1_1VariableBuildInfo.html">Arcane::VariableBuildInfo</a> vbi(VariableBuildInfo(mesh(), <span class="stringliteral">&quot;Var1&quot;</span>));</div>
<div class="line">  Arcane::MeshVectorMDVariableRefT&lt;Cell, Real, 7, MDDim2&gt; cell_var_2d(vbi);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Positionne les deux dimensions à 2x3.</span></div>
<div class="line">  <span class="comment">// Chaque maille aura 2x3 = 6 valeurs de 7 réels</span></div>
<div class="line">  cell_var_2d.reshape({ 3, 4 });</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#a44837b340ff8a4fc02299e3160a4da20">ENUMERATE_</a> (Cell, icell, allCells()) {</div>
<div class="line">    <a class="code hl_class" href="../../de/d80/classArcane_1_1NumVector.html">Arcane::NumVector&lt;Real, 7&gt;</a> v({ 1.0, 2.0, 3.0, 4.0, 5.0, 6.0 });</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Positionne la valeur pour l&#39;indice (2,1)</span></div>
<div class="line">    cell_var_2d(icell, 2, 1) = v;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Affiche la valeur du 6-ème élément du vecteur pour l&#39;indice (2,1)</span></div>
<div class="line">    info() &lt;&lt; cell_var_2d(icell, 2, 1)(5);</div>
<div class="line">  }</div>
<div class="ttc" id="aclassArcane_1_1NumVector_html"><div class="ttname"><a href="../../de/d80/classArcane_1_1NumVector.html">Arcane::NumVector</a></div><div class="ttdoc">Petit vecteur de taille fixe de N données numériques.</div><div class="ttdef"><b>Definition</b> <a href="../../da/d93/NumVector_8h_source.html#l00042">NumVector.h:43</a></div></div>
</div><!-- fragment --><p>Exemple pour les variables multi-dimensionnelles matricielles:</p>
<div class="fragment"><div class="line">  <span class="comment">// Déclare une variable 1D aux mailles d&#39;une matrix 2x5 de Real</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// La déclaration équivalente dans le fichier AXL est:</span></div>
<div class="line">  <span class="comment">// &lt;variable field-name=&quot;cell_var_2d&quot; name=&quot;Var1&quot;</span></div>
<div class="line">  <span class="comment">//           data-type=&quot;real&quot; item-kind=&quot;cell&quot; shape-dim=&quot;2&quot;</span></div>
<div class="line">  <span class="comment">//           extent0=&quot;2&quot; extent1=&quot;5&quot;</span></div>
<div class="line">  <span class="comment">// /&gt;</span></div>
<div class="line">  <a class="code hl_class" href="../../df/d8a/classArcane_1_1VariableBuildInfo.html">Arcane::VariableBuildInfo</a> vbi(VariableBuildInfo(mesh(), <span class="stringliteral">&quot;Var1&quot;</span>));</div>
<div class="line">  Arcane::MeshMatrixMDVariableRefT&lt;Cell, Real, 2, 5, MDDim1&gt; cell_var_2d(vbi);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Positionne la dimension à 9.</span></div>
<div class="line">  <span class="comment">// Chaque maille aura 9 valeurs de 2x5 = 10 réels</span></div>
<div class="line">  cell_var_2d.reshape({ 9 });</div>
<div class="line"> </div>
<div class="line">  <a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#a44837b340ff8a4fc02299e3160a4da20">ENUMERATE_</a> (Cell, icell, allCells()) {</div>
<div class="line">    <a class="code hl_class" href="../../d8/d70/classArcane_1_1NumMatrix.html">Arcane::NumMatrix&lt;Real, 2, 5&gt;</a> v({ 1.1, 2.2, 3.3, 4.4, 5.5 },</div>
<div class="line">                                    { 1.0, 2.0, 3.0, 4.0, 5.0 });</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Positionne la valeur pour l&#39;indice (2,1)</span></div>
<div class="line">    cell_var_2d(icell, 7) = v;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Affiche la valeur du (1,4) de la matrice pour l&#39;indice (6)</span></div>
<div class="line">    info() &lt;&lt; cell_var_2d(icell, 6)(1, 4);</div>
<div class="line">  }</div>
<div class="ttc" id="aclassArcane_1_1NumMatrix_html"><div class="ttname"><a href="../../d8/d70/classArcane_1_1NumMatrix.html">Arcane::NumMatrix</a></div><div class="ttdoc">Petite matrice de taille fixe contenant RowSize lignes et ColumnSize colonnes.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d08/NumMatrix_8h_source.html#l00041">NumMatrix.h:42</a></div></div>
</div><!-- fragment --><p>En interne, toutes ces variables sont similaires à une variable tableau sur le maillage dont le nombre d'éléments est égale au produit des composantes de la forme retournée par <a class="el" href="../../df/dd4/classArcane_1_1MeshMDVariableRefBaseT.html#ad434dd0d33eb2a0d4941c6b936356212">MeshMDVariableRefBaseT::fullShape()</a>. </p><hr  />
<div class="section_buttons"> <span class="back_section_button"> <a class="el" href="../../db/d4e/arcanedoc_core_types_axl.html">Descripteur de module/service (.AXL)</a> </span> <span class="next_section_button"> <a class="el" href="../../d2/da4/arcanedoc_core_types_axl_entrypoint.html">Point d'entrée</a> </span> </div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
  <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li><li class="navelem"><a class="el" href="../../d4/dc9/arcanedoc_core_types.html">Types fondamentaux</a></li><li class="navelem"><a class="el" href="../../db/d4e/arcanedoc_core_types_axl.html">Descripteur de module/service (.AXL)</a></li>
      <li class="footer">Généré le Lundi 22 Juillet 2024 02:43:18 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
    </ul>
  </div>
  <script type="text/javascript" src="../../script-apply-config-theme.js"></script>
  <script type="text/javascript">
    // On met l'appel à cette fonction dans le footer dans le cas où
    // une page ne veut pas de personnalisation (changement de la 
    // variable globale "no_custom_theme").
    applyConfigWithCookies();
  </script>
</body>
</html>
