<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.13.2" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="../../logo_arcane.svg" type="image/svg+xml">
    <title>Arcane: Ligne de commande et jeu de données</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
    <script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../user_colors.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
    <script type="text/javascript" src="../../script-helper.js"></script>
    <script type="text/javascript" src="../../script-resize.js"></script>
    <script type="text/javascript" src="../../script-num-lines-code.js"></script>
    <script type="text/javascript" src="../../script-config-theme.js"></script>
    <script type="text/javascript" src="../../script-edit-config-theme.js"></script>
    <script type="text/javascript" src="../../script-alternative-theme.js"></script>
    <script type="text/javascript">
      // On demande l'activation de la personnalisation de la page.
      var no_custom_theme = false;
      DoxygenAwesomeDarkModeToggle.title = "Thème clair/sombre";
      DoxygenAwesomeDarkModeToggle.init();
      DoxygenAwesomeFragmentCopyButton.title = "Copier le code dans le presse-papier";
      DoxygenAwesomeFragmentCopyButton.init();
      DoxygenAwesomeParagraphLink.init();
      DoxygenAwesomeInteractiveToc.init();
      DoxygenAwesomeTabs.init()
      waitElemForResizeSideNav();
      setOldSize();
      //waitItemExpandCurrent();
    </script>
  </head>
  <body>
    <!--BEGIN CORNER_GITHUB-->
    <!-- https://tholman.com/github-corners/ -->
    <a href="https://github.com/arcaneframework/framework" class="github-corner" aria-label="Voir les sources sur GitHub">
      <svg width="70" height="70" viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg>
    </a>
    <!--END CORNER_GITHUB-->
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectlogo">
                  <a href="../../index.html" title="Aller à la page principale">
                    <img alt="Logo" src="../../arcane_framework_small.webp" />
                  </a>
                </td>
              </tr>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">Arcane
                    <span id="projectnumber">&#160;v4.1.0.0</span>
                  </div>
                  <div id="projectbrief">Documentation utilisateur</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part -->
<!-- Généré par Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d9/d13/arcanedoc_execution_commandlineargs.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Ligne de commande et jeu de données</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table des matières</h3>
<ul>
  <li class="level1">
    <a href="#arcanedoc_execution_commandlineargs_intro">Introduction</a>
  </li>
  <li class="level1">
    <a href="#arcanedoc_execution_commandlineargs_symbol">Personnalisation par symboles</a>
    <ul>
      <li class="level2">
        <a href="#arcanedoc_execution_commandlineargs_symbol_dataset">Les symboles dans le jeu de données</a>
      </li>
      <li class="level2">
        <a href="#arcanedoc_execution_commandlineargs_symbol_command">Attribution d&#39;une valeur à un symbole dans la ligne de commande</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#arcanedoc_execution_commandlineargs_addr">Personnalisation par adresse de l&#39;option</a>
    <ul>
      <li class="level2">
        <a href="#arcanedoc_execution_commandlineargs_addr_unique">Les options uniques</a>
      </li>
      <li class="level2">
        <a href="#arcanedoc_execution_commandlineargs_addr_multi">Les options multiples</a>
      </li>
      <li class="level2">
        <a href="#arcanedoc_execution_commandlineargs_addr_add_option">L&#39;ajout d&#39;options</a>
        <ul>
          <li class="level3">
            <a href="#arcanedoc_execution_commandlineargs_addr_add_option_default">Et si on commence à l&#39;indice 2 ?</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#arcanedoc_execution_commandlineargs_addr_multi_special_syntax">Les syntaxes spéciales</a>
        <ul>
          <li class="level3">
            <a href="#arcanedoc_execution_commandlineargs_addr_multi_special_syntax_index_any">L&#39;indice ANY</a>
          </li>
          <li class="level3">
            <a href="#arcanedoc_execution_commandlineargs_addr_multi_special_syntax_tag_any">La balise ANY</a>
          </li>
          <li class="level3">
            <a href="#arcanedoc_execution_commandlineargs_addr_multi_special_syntax_mix_any">Le mélange des deux ANY</a>
          </li>
        </ul>
      </li>
      <li class="level2">
        <a href="#arcanedoc_execution_commandlineargs_addr_invalid_syntax">Les syntaxes invalides</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_doc_2doc__user_2chap__execution_25__commandlineargs"></a></p>
<h1><a class="anchor" id="arcanedoc_execution_commandlineargs_intro"></a>
Introduction</h1>
<p>Il y a deux possibilités de personnalisation des options du jeu de données via les arguments de la ligne de commande :</p><ul>
<li>par remplacement de symboles,</li>
<li>par adresse de l'option <em>(méthode recommandée)</em>.</li>
</ul>
<p>Il est possible de personnaliser tous les types d'options Arcane listées ici : <a class="el" href="../../de/d49/arcanedoc_core_types_axl_caseoptions_options.html">Les types d'options</a></p>
<h1><a class="anchor" id="arcanedoc_execution_commandlineargs_symbol"></a>
Personnalisation par symboles</h1>
<h2><a class="anchor" id="arcanedoc_execution_commandlineargs_symbol_dataset"></a>
Les symboles dans le jeu de données</h2>
<p>Ce type de personnalisation nécessite de modifier le jeu de données pour y inclure des symboles. Ce jeu de données peut donc devenir inutilisable sans les bons arguments de la ligne de commande.</p>
<p>Un symbole est une chaîne de caractères entourée d'arrobases.</p>
<p>Exemple : <code>@UneValeur@</code></p>
<p>Si on met ce symbole dans un jeu de données, on pourrait avoir, par exemple :</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!--Fichier ARC--&gt;</span></div>
<div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">case</span> <span class="keyword">codename</span>=<span class="stringliteral">&quot;ArcaneTest&quot;</span> <span class="keyword">codeversion</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">arcane</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">meshes</span>/&gt;</div>
<div class="line">  </div>
<div class="line">  &lt;<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">deltat-cp</span>&gt;@<span class="keyword">UneValeur</span>@&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">  </div>
<div class="line">&lt;/<span class="keywordtype">case</span>&gt;</div>
</div><!-- fragment --><p>Que l'option <code>deltat-cp</code> soit une <em>option simple</em>, une <em>option énumérée</em> ou une <em>option étendue</em>, le fonctionnement est le même, y compris si ces options sont dans des <em>options complexes</em> ou des <em>options services</em>.</p>
<p>Pour les <em>options services</em>, le remplacement des symboles fonctionne aussi dans les attributs <code>name</code> et <code>mesh-name</code>. Exemple :</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!--Fichier ARC--&gt;</span></div>
<div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">case</span> <span class="keyword">codename</span>=<span class="stringliteral">&quot;ArcaneTest&quot;</span> <span class="keyword">codeversion</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">arcane</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">meshes</span>/&gt;</div>
<div class="line">  </div>
<div class="line">  &lt;<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">post-processor2</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;@NamePostProcessor@&quot;</span> <span class="keyword">mesh-name</span>=<span class="stringliteral">&quot;@MeshPostProcessor@&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">fileset-size</span>&gt;@<span class="keyword">NbTimeInOneFile</span>@&lt;/<span class="keywordtype">fileset-size</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">binary-file</span>&gt;<span class="keyword">false</span>&lt;/<span class="keywordtype">binary-file</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">post-processor2</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">  </div>
<div class="line">&lt;/<span class="keywordtype">case</span>&gt;</div>
</div><!-- fragment --><p>Trois symboles peuvent être remplacés : <code>@NamePostProcessor@</code>, <code>@MeshPostProcessor@</code> et <code>@NbTimeInOneFile@</code>.</p>
<dl class="section remark"><dt>Remarques</dt><dd>Ici, on peut voir une première limite au remplacement de symboles pour les <em>options services</em> : si on remplace le symbole <code>@NamePostProcessor@</code> par <code>Ensight7PostProcessor</code>, parfait. En revanche, si on le remplace par <code>VtkHdfV2PostProcessor</code>, ça va être problématique car ces deux services n'utilisent pas les mêmes options ! Les options <code>fileset-size</code> et <code>binary-file</code> n'existent pas dans <code>VtkHdfV2PostProcessor</code>.</dd></dl>
<p>Le remplacement de symboles peut aussi être utilisé dans les <em>options simples</em> ayant un type tableau.</p>
<p>Prenons l'option suivante :</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!--Fichier AXL--&gt;</span></div>
<div class="line">&lt;<span class="keywordtype">simple</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;simple-real-array&quot;</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;real[]&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">description</span>&gt;<span class="keyword">Tableau</span> <span class="keyword">de</span> <span class="keyword">réel</span>&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">simple</span>&gt;</div>
</div><!-- fragment --><p>Dans le jeu de données, ajoutons un symbole :</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!--Fichier ARC--&gt;</span></div>
<div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">case</span> <span class="keyword">codename</span>=<span class="stringliteral">&quot;ArcaneTest&quot;</span> <span class="keyword">codeversion</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">arcane</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">meshes</span>/&gt;</div>
<div class="line">  </div>
<div class="line">  &lt;<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">simple-real-array</span>&gt;3.0 @<span class="keyword">DeuxiemeElement</span>@ 3.2 3.3&lt;/<span class="keywordtype">simple-real-array</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">  </div>
<div class="line">&lt;/<span class="keywordtype">case</span>&gt;</div>
</div><!-- fragment --><p>On peut remplacer le symbole <code>@DeuxiemeElement@</code> par <code>3.1</code>, ou par plusieurs valeurs : <code>3.1 3.11</code>.</p>
<h2><a class="anchor" id="arcanedoc_execution_commandlineargs_symbol_command"></a>
Attribution d'une valeur à un symbole dans la ligne de commande</h2>
<dl class="section note"><dt>Note</dt><dd>Pour l'instant, il est nécessaire de définir la variable d'environnement <code>ARCANE_REPLACE_SYMBOLS_IN_DATASET</code>. <div class="fragment"><div class="line">export ARCANE_REPLACE_SYMBOLS_IN_DATASET=1</div>
</div><!-- fragment --></dd></dl>
<p>Lorsque le jeu de données contient les symboles voulus, on peut attribuer leurs valeurs lors de l'exécution.</p>
<p>Cette attribution reprend la syntaxe des arguments Arcane (<code>-A,</code>).</p>
<p>Admettons que l'on ait, dans le jeu de données, les symboles <code>@NamePostProcessor@</code>, <code>@MeshPostProcessor@</code> et <code>@NbTimeInOneFile@</code>.</p>
<p>Pour attribuer une valeur à ces symboles, on peut lancer l'application comme ceci :</p>
<div class="tabbed"></div><div class="tabbed"><ul>
<li><b class="tab-title">Multiple <code>-A,</code></b> <div> <div class="fragment"><div class="line">./app \</div>
<div class="line">-A,NamePostProcessor=Ensight7PostProcessor \</div>
<div class="line">-A,MeshPostProcessor=Mesh1 \</div>
<div class="line">-A,NbTimeInOneFile=10 \</div>
<div class="line">dataset_with_symbols.arc</div>
</div><!-- fragment --> </div></li>
<li><b class="tab-title">Unique <code>-A,</code></b> <div> <div class="fragment"><div class="line">./app \</div>
<div class="line">-A,NamePostProcessor=Ensight7PostProcessor,MeshPostProcessor=Mesh1,NbTimeInOneFile=10 \</div>
<div class="line">dataset_with_symbols.arc</div>
</div><!-- fragment --> </div></li>
</ul>
</div><div class="tabbed"></div><p>Il est aussi possible d'entourer les valeurs par des guillemets <code>""</code>. C'est particulièrement utile pour les types tableaux : </p><div class="fragment"><div class="line">./app \</div>
<div class="line">-A,DeuxiemeElement=&quot;3.1 3.11&quot; \</div>
<div class="line">dataset_with_symbols.arc</div>
</div><!-- fragment --><p>Lorsqu'un symbole est présent dans le jeu de données mais absent de la ligne de commande, le symbole est simplement remplacé par une chaîne de caractères vide.</p>
<dl class="section warning"><dt>Avertissement</dt><dd>Dans Arcane, une différence est faite entre une option vide <code>&lt;deltat-cp&gt;&lt;/deltat-cp&gt;</code> et une option absente du jeu de données. Dans le premier cas, la valeur de l'option est <b>vide</b> (<code>String("")</code>) mais présente donc n'est pas remplacée par la valeur par défaut. Dans le second cas, la valeur de l'option est <b>null</b> (<code>String()</code>) donc est remplacée par la valeur par défaut.</dd></dl>
<h1><a class="anchor" id="arcanedoc_execution_commandlineargs_addr"></a>
Personnalisation par adresse de l'option</h1>
<h2><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_unique"></a>
Les options uniques</h2>
<p>Par rapport au remplacement de symboles, cette méthode permet de conserver un jeu de données valide sans arguments obligatoires (mais est un peu plus verbeuse).</p>
<p>Ces deux méthodes agissent aussi aux mêmes endroits en interne, donc les possibilités sont les mêmes : il est possible de modifier la valeur d'une <em>option simple</em>, d'une <em>option énumérée</em> ou d'une <em>option étendue</em>, même si ces options sont dans des <em>options complexes</em> ou des <em>options services</em>.</p>
<p>Pour les <em>options services</em>, comme précédemment, on peut agir sur les attributs <code>name</code> et <code>mesh-name</code>.</p>
<p>Reprenons le premier exemple : </p><div class="fragment"><div class="line"><span class="comment">&lt;!--Fichier ARC--&gt;</span></div>
<div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">case</span> <span class="keyword">codename</span>=<span class="stringliteral">&quot;ArcaneTest&quot;</span> <span class="keyword">codeversion</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">arcane</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">meshes</span>/&gt;</div>
<div class="line">  </div>
<div class="line">  &lt;<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">deltat-cp</span>&gt;3.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">  </div>
<div class="line">&lt;/<span class="keywordtype">case</span>&gt;</div>
</div><!-- fragment --><p>Si l'on souhaite modifier la valeur de l'option <code>deltat-cp</code>, il suffit de lancer l'application comme ceci :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/deltat-cp=3.1 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><p>Il est nécessaire d'avoir l'adresse (XPath) de l'option. Pour la retrouver, il faut dérouler les éléments XML. Ici, l'option <code>deltat-cp</code> est à l'adresse : <code>//case/simple-hydro/deltat-cp</code>. Ensuite, on retire le <code>case/</code> au début (ou <code>cas/</code> pour les jeux de données en français). Enfin, on peut construire l'argument à ajouter :</p>
<p><code>-A,</code><code>//simple-hydro/deltat-cp</code><code>=3.1</code></p>
<p>Comme pour le remplacement de symboles, on peut ajouter des guillemets :</p>
<p><code>-A,//simple-hydro/simple-real-array="3.1 3.11 3.12"</code></p>
<p>Dans le cas des attributs, ils sont désignés par un <code>@</code> (pour l'attribut <code>name</code>, on doit mettre <code>@name</code> dans l'adresse). Si l'on souhaite modifier l'attribut <code>name</code> d'un service, on peut le faire comme ceci :</p>
<p><code>-A,//simple-hydro/post-processor/@name=VtkHdfV2PostProcessor</code></p>
<h2><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_multi"></a>
Les options multiples</h2>
<p>Mais un problème apparait assez vite : comment faire si on a des options multiples ?</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!--Fichier ARC--&gt;</span></div>
<div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">case</span> <span class="keyword">codename</span>=<span class="stringliteral">&quot;ArcaneTest&quot;</span> <span class="keyword">codeversion</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">arcane</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">meshes</span>/&gt;</div>
<div class="line">  </div>
<div class="line">  &lt;<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">deltat-cp</span>&gt;3.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">deltat-cp</span>&gt;6.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">deltat-cp</span>&gt;7.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">  </div>
<div class="line">&lt;/<span class="keywordtype">case</span>&gt;</div>
</div><!-- fragment --><p>En XML, dans ce genre de cas, on utilise des indices. Ainsi, pour les trois valeurs de <code>deltat-cp</code>, on les adresse comme ceci :</p>
<p><code>//simple-hydro/deltat-cp[1]</code><br  />
 <code>//simple-hydro/deltat-cp[2]</code><br  />
 <code>//simple-hydro/deltat-cp[3]</code></p>
<dl class="section warning"><dt>Avertissement</dt><dd>Il n'y a pas d'erreur au niveau des indices. En XML, les indices commencent à 1, et non 0.</dd></dl>
<p>On peut aussi les écrire comme ceci :</p>
<p><code>//simple-hydro[1]/deltat-cp[1]</code><br  />
 <code>//simple-hydro[1]/deltat-cp[2]</code><br  />
 <code>//simple-hydro[1]/deltat-cp[3]</code></p>
<p>Ces syntaxes sont gérées par Arcane. Ainsi, pour modifier la seconde option, on peut écrire :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/deltat-cp[2]=6.1 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><p>Ou bien :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro[1]/deltat-cp[2]=6.1 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><h2><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_add_option"></a>
L'ajout d'options</h2>
<p>Une chose que l'on peut faire aussi est d'ajouter des options.</p>
<p>Si l'on souhaite ajouter une quatrième option <code>deltat-cp</code>, il est possible d'ajouter l'argument :</p>
<p><code>-A,//simple-hydro/deltat-cp[4]=9.0</code></p>
<p>Il est aussi possible d'ajouter des options non présentes dans le jeu de données (mais présentes dans l'AXL) :</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!--Fichier ARC--&gt;</span></div>
<div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">case</span> <span class="keyword">codename</span>=<span class="stringliteral">&quot;ArcaneTest&quot;</span> <span class="keyword">codeversion</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">arcane</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">meshes</span>/&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line"> </div>
<div class="line">&lt;/<span class="keywordtype">case</span>&gt;</div>
</div><!-- fragment --><p>On pourrait ajouter les options via les arguments de la ligne de commande :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/deltat-cp[1]=3.0 \</div>
<div class="line">-A,//simple-hydro/deltat-cp[2]=6.0 \</div>
<div class="line">-A,//simple-hydro/deltat-cp[3]=7.0 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><p>Ça fonctionne aussi pour les <em>options services</em>. Dans ce cas, il est nécessaire d'ajouter au moins l'attribut <code>name</code> :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/post-processor/@name=VtkHdfV2PostProcessor \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><p>Puis, on peut, par exemple, modifier les <em>options simples</em> de ce service ou l'attribut <code>mesh-name</code> :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/post-processor/@name=VtkHdfV2PostProcessor \</div>
<div class="line">-A,//simple-hydro/post-processor/@mesh-name=Mesh1 \</div>
<div class="line">-A,//simple-hydro/post-processor/max-write-size=50 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><dl class="section warning"><dt>Avertissement</dt><dd>Il n'est pas encore possible d'ajouter des <em>options complexes</em>.</dd></dl>
<h3><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_add_option_default"></a>
Et si on commence à l'indice 2 ?</h3>
<p>Si, au lieu de lancer notre application avec ces arguments :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/deltat-cp[1]=3.0 \</div>
<div class="line">-A,//simple-hydro/deltat-cp[2]=6.0 \</div>
<div class="line">-A,//simple-hydro/deltat-cp[3]=7.0 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><p>on lançait ceci :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/deltat-cp[2]=6.0 \</div>
<div class="line">-A,//simple-hydro/deltat-cp[3]=7.0 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><p>Dans ce cas, l'option <code>//simple-hydro/deltat-cp[1]</code>, qui n'est ni présente dans le jeu de données, ni présente dans les arguments de la ligne de commande, sera ajouté avec la valeur par défaut.</p>
<h2><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_multi_special_syntax"></a>
Les syntaxes spéciales</h2>
<h3><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_multi_special_syntax_index_any"></a>
L'indice ANY</h3>
<p>L'indice ANY permet de traiter plusieurs options d'indices différents en une fois. Il est représenté par des crochets vides : <code>[]</code>.</p>
<p>Si l'on reprend l'exemple au-dessus et que l'on souhaite modifier toutes les valeurs de <code>deltat-cp</code>, on peut utiliser l'adresse :</p>
<p><code>//simple-hydro/deltat-cp[]</code></p>
<p>Exemple de lancement :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/deltat-cp[]=2.0 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><p>Et dans ce cas, les trois options <code>simple-hydro/deltat-cp</code> auraient la valeur <code>2.0</code>.</p>
<h3><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_multi_special_syntax_tag_any"></a>
La balise ANY</h3>
<p>La balise ANY permet de changer la valeur d'une option présente à plusieurs endroits. Elle est représentée par une partie d'adresse vide (deux <code>/</code> sans rien entre) (donc <code>//module1/option1/option11</code>, si on veut remplacer <code>option1</code> par ANY, on fait <code>//module1//option11</code>).</p>
<dl class="section note"><dt>Note</dt><dd>La balise ANY ne remplace qu'une seule partie de l'adresse. Pour remplacer plusieurs parties, il faut en mettre plusieurs. Reprenons l'exemple du dessus en remplaçant <code>module1</code> par ANY : <code>////option11</code></dd></dl>
<p>En reprenant l'exemple au-dessus, si l'on souhaite modifier toutes les options <code>deltat-cp[2]</code>, quelque soit le module dans lequel cette option apparait, on peut utiliser l'adresse :</p>
<p><code>///deltat-cp[2]</code></p>
<p>Exemple de lancement :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,///deltat-cp[2]=2.0 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><dl class="section warning"><dt>Avertissement</dt><dd>La balise ANY ne peut pas être présente à la fin de l'adresse (l'adresse <code>//module1/option11/</code> est invalide).</dd></dl>
<h3><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_multi_special_syntax_mix_any"></a>
Le mélange des deux ANY</h3>
<p>Admettons que l'on ait le jeu de données : </p><div class="fragment"><div class="line"><span class="comment">&lt;!--Fichier ARC--&gt;</span></div>
<div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">case</span> <span class="keyword">codename</span>=<span class="stringliteral">&quot;ArcaneTest&quot;</span> <span class="keyword">codeversion</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">arcane</span>/&gt;</div>
<div class="line">  &lt;<span class="keywordtype">meshes</span>/&gt;</div>
<div class="line">  </div>
<div class="line">  &lt;<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">deltat-cp</span>&gt;3.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">print-details-before-cp</span>&gt;<span class="keyword">true</span>&lt;/<span class="keywordtype">print-details-before-cp</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">deltat-cp</span>&gt;6.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">print-details-before-cp</span>&gt;<span class="keyword">true</span>&lt;/<span class="keywordtype">print-details-before-cp</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">final-time</span>&gt;10.2&lt;/<span class="keywordtype">final-time</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">post-processor</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Ensight7PostProcessor&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">fileset-size</span>&gt;10&lt;/<span class="keywordtype">fileset-size</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">binary-file</span>&gt;<span class="keyword">false</span>&lt;/<span class="keywordtype">binary-file</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">post-processor</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">noidea-service</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;StillNoIdea&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">duration</span>&gt;-1&lt;/<span class="keywordtype">duration</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">rewrite</span>&gt;<span class="keyword">false</span>&lt;/<span class="keywordtype">rewrite</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">noidea-service</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">simple-hydro</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">pas-simple-hydro</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">deltat-cp</span>&gt;1.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">print-details-before-cp</span>&gt;<span class="keyword">true</span>&lt;/<span class="keywordtype">print-details-before-cp</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">deltat-cp</span>&gt;3.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">print-details-before-cp</span>&gt;<span class="keyword">true</span>&lt;/<span class="keywordtype">print-details-before-cp</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">deltat-cp</span>&gt;7.0&lt;/<span class="keywordtype">deltat-cp</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">print-details-before-cp</span>&gt;<span class="keyword">true</span>&lt;/<span class="keywordtype">print-details-before-cp</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">checkpoint</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">final-time</span>&gt;8.9&lt;/<span class="keywordtype">final-time</span>&gt;</div>
<div class="line"> </div>
<div class="line">    &lt;<span class="keywordtype">post-processor</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Ensight7PostProcessor&quot;</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">fileset-size</span>&gt;10&lt;/<span class="keywordtype">fileset-size</span>&gt;</div>
<div class="line">      &lt;<span class="keywordtype">binary-file</span>&gt;<span class="keyword">false</span>&lt;/<span class="keywordtype">binary-file</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">post-processor</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">pas-simple-hydro</span>&gt;</div>
<div class="line">  </div>
<div class="line">&lt;/<span class="keywordtype">case</span>&gt;</div>
</div><!-- fragment --><p>On pourrait commencer par vouloir modifier l'option <code>deltat-cp</code> du second checkpoint du module <code>pas-simple-hydro</code>. Pour cela, on peut utiliser l'argument : <br  />
 <code>-A,//pas-simple-hydro/checkpoint[2]/delta-cp=4.0</code>.</p>
<p>Puis, on pourrait modifier le premier <code>deltat-cp</code> des deux modules : <br  />
 <code>-A,///checkpoint[1]/delta-cp=2.0</code>.</p>
<p>Ensuite, on pourrait ne pas vouloir d'écriture entre les checkpoints : <br  />
 <code>-A,///checkpoint[]/print-details-before-cp=false</code>.</p>
<p>Enfin, les services du module <code>simple-hydro</code> doivent agir sur le <code>Mesh0</code> et les services <code>pas-simple-hydro</code> sur le <code>Mesh1</code> : <br  />
 <code>-A,//simple-hydro//@mesh-name=Mesh0</code> <br  />
 <code>-A,//pas-simple-hydro//@mesh-name=Mesh1</code></p>
<p>Finalement, on se retrouve avec la commande :</p>
<div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//pas-simple-hydro/checkpoint[2]/delta-cp=4.0 \</div>
<div class="line">-A,///checkpoint[1]/delta-cp=2.0 \</div>
<div class="line">-A,///checkpoint[]/print-details-before-cp=false \</div>
<div class="line">-A,//simple-hydro//@mesh-name=Mesh0 \</div>
<div class="line">-A,//pas-simple-hydro//@mesh-name=Mesh1 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --><h2><a class="anchor" id="arcanedoc_execution_commandlineargs_addr_invalid_syntax"></a>
Les syntaxes invalides</h2>
<p>Pour cette partie, quelques containtes d'utilisations ont été mises en places :</p>
<ul>
<li>Les arguments commençants par <code>-A,//</code> sont réservés à cet usage.</li>
<li>Les adresses ne peuvent pas terminer par un <code>/</code>. Exemple invalide : <div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/deltat-cp/=3.1 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --></li>
<li>Les indices doivent être des entiers supérieurs ou égals à 1.</li>
<li>Lorsqu'un indice est présent (y compris l'indice ANY), une balise doit aussi être présente. Exemple invalide : <div class="fragment"><div class="line">./app \</div>
<div class="line">-A,//simple-hydro/[2]/option=3.1 \</div>
<div class="line">dataset.arc</div>
</div><!-- fragment --></li>
</ul>
<hr  />
<div class="section_buttons"> <span class="back_section_button"> <a class="el" href="../../da/d65/arcanedoc_execution_traces.html">Utilisation des traces</a> </span>   </div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
  <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li><li class="navelem"><a class="el" href="../../d0/da2/arcanedoc_execution.html">Exécution, runtime</a></li>
      <li class="footer">Généré le Lundi 20 Octobre 2025 03:12:34 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
    </ul>
  </div>
  <script type="text/javascript" src="../../script-apply-config-theme.js"></script>
  <script type="text/javascript">
    // On met l'appel à cette fonction dans le footer dans le cas où
    // une page ne veut pas de personnalisation (changement de la 
    // variable globale "no_custom_theme").
    applyConfigWithCookies();
  </script>
</body>
</html>
