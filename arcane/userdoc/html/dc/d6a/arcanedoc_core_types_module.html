<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="../../logo_arcane.svg" type="image/svg+xml">
    <title>Arcane: Module</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../user_colors.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
    <script type="text/javascript" src="../../script-helper.js"></script>
    <script type="text/javascript" src="../../script-resize.js"></script>
    <script type="text/javascript" src="../../script-num-lines-code.js"></script>
    <script type="text/javascript" src="../../script-config-theme.js"></script>
    <script type="text/javascript" src="../../script-edit-config-theme.js"></script>
    <script type="text/javascript" src="../../script-alternative-theme.js"></script>
    <script type="text/javascript">
      // On demande l'activation de la personnalisation de la page.
      var no_custom_theme = false;
      DoxygenAwesomeDarkModeToggle.title = "Thème clair/sombre";
      DoxygenAwesomeDarkModeToggle.init();
      DoxygenAwesomeFragmentCopyButton.title = "Copier le code dans le presse-papier";
      DoxygenAwesomeFragmentCopyButton.init();
      DoxygenAwesomeParagraphLink.init();
      DoxygenAwesomeInteractiveToc.init();
      DoxygenAwesomeTabs.init()
      waitElemForResizeSideNav();
      setOldSize();
      //waitItemExpandCurrent();
    </script>
  </head>
  <body>
    <!--BEGIN CORNER_GITHUB-->
    <!-- https://tholman.com/github-corners/ -->
    <a href="https://github.com/arcaneframework/framework" class="github-corner" aria-label="Voir les sources sur GitHub">
      <svg width="70" height="70" viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg>
    </a>
    <!--END CORNER_GITHUB-->
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectlogo">
                  <a href="../../index.html" title="Aller à la page principale">
                    <img alt="Logo" src="../../arcane_framework_small.webp" />
                  </a>
                </td>
              </tr>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">Arcane
                    <span id="projectnumber">&#160;v3.14.0.0</span>
                  </div>
                  <div id="projectbrief">Documentation utilisateur</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part -->
<!-- Généré par Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/d6a/arcanedoc_core_types_module.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Module</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table des matières</h3>
<ul><li class="level1"><a href="#arcanedoc_core_types_module_desc">Descripteur de module</a></li>
<li class="level1"><a href="#arcanedoc_core_types_module_class">Classe représentant le module</a></li>
<li class="level1"><a href="#arcanedoc_core_types_module_connectarcane">Connexion du module à Arcane</a></li>
</ul>
</div>
<div class="textblock"><p>Un module est un ensemble de <b>points d'entrée</b> et de <b>variables</b>. Il peut posséder des options de configuration qui permettent à l'utilisateur de paramétrer le module via le jeu de données de la simulation.</p>
<p>Un module est représenté par une classe et un fichier XML appelé <b>descripteur de module</b>.</p>
<h1><a class="anchor" id="arcanedoc_core_types_module_desc"></a>
Descripteur de module</h1>
<p>Le descripteur de module est un fichier XML ayant l'extension ".axl". Il présente les caractéristiques du module :</p><ul>
<li>ses variables,</li>
<li>ses points d'entrée,</li>
<li>ses options de configuration.</li>
</ul>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Hydro&quot;</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">name</span> <span class="keyword">lang</span>=<span class="stringliteral">&quot;fr&quot;</span>&gt;<span class="keyword">Hydro</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">description</span>&gt;<span class="keyword">Descripteur</span> <span class="keyword">du</span> <span class="keyword">module</span> <span class="keyword">Hydro</span>&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">variables</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">variables</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">entry-points</span>&gt;</div>
<div class="line">  &lt;/<span class="keywordtype">entry-points</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;<span class="keywordtype">options</span>&gt;</div>
<div class="line">    <span class="comment">&lt;!-- Service de type IEquationOfState. --&gt;</span></div>
<div class="line">  &lt;/<span class="keywordtype">options</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">module</span>&gt;</div>
</div><!-- fragment --><p>Par exemple, le fichier <code>Hydro.axl</code> ci-dessus présente le module nommé <b>Hydro</b> dont la classe de base, est <code>HydroModule</code> (cas général). <b>TODO: ajouter doc référence sur les autres attributs du module.</b></p>
<p>Les variables, les points d'entrée et les options seront décrits dans le chapitre <a class="el" href="../../db/d4e/arcanedoc_core_types_axl.html">Descripteur de module/service (.AXL)</a>.</p>
<h1><a class="anchor" id="arcanedoc_core_types_module_class"></a>
Classe représentant le module</h1>
<p>Grâce à l'utilitaire <code>axl2cc</code>, le fichier <code>Hydro.axl</code> génère un fichier Hydro_axl.h. Ce fichier contient la classe <code>ArcaneHydroObject</code>, classe de base du module de Hydro.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>HydroModule</div>
<div class="line">: <span class="keyword">public</span> ArcaneHydroObject</div>
<div class="line">{</div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  <span class="comment">// Construit un module avec les paramètres spécifiés dans \a mb</span></div>
<div class="line">  ModuleHydro(<span class="keyword">const</span> ModuleBuildInfo &amp; mbi)</div>
<div class="line">  : ArcaneHydroObject(mbi) {}</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Retourne le numéro de version du module</span></div>
<div class="line">  <span class="keyword">virtual</span> VersionInfo versionInfo()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> VersionInfo(1, 0, 0); }</div>
<div class="line">};</div>
</div><!-- fragment --><p>L'exemple précédent montre que Arcane impose que le constructeur du module prenne un objet de type <code>ModuleBuildInfo</code> en paramètre pour le transmettre à sa classe de base. Arcane impose également la définition d'une méthode <code>versionInfo()</code> qui retourne le numéro de version de votre module.</p>
<dl class="section note"><dt>Note</dt><dd>Le fait de dériver de la classe ArcaneHydroObject donne accés, entre autre, aux traces Arcane (cf <a class="el" href="../../da/d65/arcanedoc_execution_traces.html">Utilisation des traces</a>) et aux méthodes suivantes : <br  />
 <table class="doxtable">
<tr>
<th>Méthode</th><th>Action </th></tr>
<tr>
<td><code>allCells()</code> </td><td>retourne le groupe de toutes les mailles  </td></tr>
<tr>
<td><code>allNodes()</code> </td><td>retourne le groupe de tous les noeuds  </td></tr>
<tr>
<td><code>allFaces()</code> </td><td>retourne le groupe de toutes les faces  </td></tr>
<tr>
<td><code>ownCells()</code> </td><td>retourne le groupe des mailles propres au sous-domaine  </td></tr>
<tr>
<td><code>ownNodes()</code> </td><td>retourne le groupe des noeuds propres au sous-domaine  </td></tr>
<tr>
<td><code>ownFaces()</code> </td><td>retourne le groupe de toutes les faces propres au sous-domaine  </td></tr>
</table>
</dd></dl>
<h1><a class="anchor" id="arcanedoc_core_types_module_connectarcane"></a>
Connexion du module à Arcane</h1>
<p>Une instance du module est construite par l'architecture lors de l'exécution.</p>
<p>L'utilisateur doit donc fournir une fonction pour créer une instance de la classe du module. Arcane fournit une macro permettant de définir une fonction générique de création. Cette macro doit être écrite dans le fichier source où est défini le module. Elle possède le prototype suivant :</p>
<div class="fragment"><div class="line">ARCANE_REGISTER_MODULE_HYDRO(HydroModule);</div>
</div><!-- fragment --><p><code>*HydroModule*</code> correspond au nom de la classe et <em>HYDRO</em> qui suit <b>ARCANE_REGISTER_MODULE_</b> permet de définir la fonction de création.</p>
<hr  />
<div class="section_buttons"> <span class="back_section_button"> <a class="el" href="../../d4/dc9/arcanedoc_core_types.html">Types fondamentaux</a> </span> <span class="next_section_button"> <a class="el" href="../../d1/d23/arcanedoc_core_types_service.html">Service</a> </span> </div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
  <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li><li class="navelem"><a class="el" href="../../d4/dc9/arcanedoc_core_types.html">Types fondamentaux</a></li>
      <li class="footer">Généré le Lundi 22 Juillet 2024 02:43:18 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
    </ul>
  </div>
  <script type="text/javascript" src="../../script-apply-config-theme.js"></script>
  <script type="text/javascript">
    // On met l'appel à cette fonction dans le footer dans le cas où
    // une page ne veut pas de personnalisation (changement de la 
    // variable globale "no_custom_theme").
    applyConfigWithCookies();
  </script>
</body>
</html>
