<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="../../logo_arcane.svg" type="image/svg+xml">
    <title>Arcane: Gestion de la géométrie</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../user_colors.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
    <script type="text/javascript" src="../../script-helper.js"></script>
    <script type="text/javascript" src="../../script-resize.js"></script>
    <script type="text/javascript" src="../../script-num-lines-code.js"></script>
    <script type="text/javascript" src="../../script-config-theme.js"></script>
    <script type="text/javascript" src="../../script-edit-config-theme.js"></script>
    <script type="text/javascript" src="../../script-alternative-theme.js"></script>
    <script type="text/javascript">
      // On demande l'activation de la personnalisation de la page.
      var no_custom_theme = false;
      DoxygenAwesomeDarkModeToggle.title = "Thème clair/sombre";
      DoxygenAwesomeDarkModeToggle.init();
      DoxygenAwesomeFragmentCopyButton.title = "Copier le code dans le presse-papier";
      DoxygenAwesomeFragmentCopyButton.init();
      DoxygenAwesomeParagraphLink.init();
      DoxygenAwesomeInteractiveToc.init();
      DoxygenAwesomeTabs.init()
      waitElemForResizeSideNav();
      setOldSize();
      //waitItemExpandCurrent();
    </script>
  </head>
  <body>
    <!--BEGIN CORNER_GITHUB-->
    <!-- https://tholman.com/github-corners/ -->
    <a href="https://github.com/arcaneframework/framework" class="github-corner" aria-label="Voir les sources sur GitHub">
      <svg width="70" height="70" viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg>
    </a>
    <!--END CORNER_GITHUB-->
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectlogo">
                  <a href="../../index.html" title="Aller à la page principale">
                    <img alt="Logo" src="../../arcane_framework_small.webp" />
                  </a>
                </td>
              </tr>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">Arcane
                    <span id="projectnumber">&#160;v3.14.0.0</span>
                  </div>
                  <div id="projectbrief">Documentation utilisateur</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part -->
<!-- Généré par Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/d8a/arcanedoc_entities_geometric.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Gestion de la géométrie</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table des matières</h3>
<ul><li class="level1"><a href="#arcanedoc_entities_geometric_introduction">Introduction</a></li>
<li class="level1"><a href="#arcanedoc_entities_geometric_geomelement">Éléments géométriques</a></li>
<li class="level1"><a href="#arcanedoc_entities_geometric_geomshape">Formes géométriques</a></li>
<li class="level1"><a href="#arcanedoc_entities_geometric_viewusage">Utilisation des vues</a><ul><li class="level2"><a href="#arcanedoc_entities_geometric_geomelementview">Utilisation des vues sur les éléments géométriques.</a></li>
<li class="level2"><a href="#arcanedoc_entities_geometric_geomshapeview">Utilisation des GeomShapeView</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Cette page décrit les classes gérant la géométrie dans Arcane.</p>
<p>Le but des classes géométriques de Arcane est de fournir une structure de donnée unifiée pour gérer de manière efficace les opérations sur les polygones (en 2D) et les polyèdres (en 3D).</p>
<h1><a class="anchor" id="arcanedoc_entities_geometric_introduction"></a>
Introduction</h1>
<p>Les polygones et polyèdres supportés sont définis dans l'énumération GeomType. Il s'agit de :</p><ul>
<li>en 2D, les triangles, les quadrangles, les pentagones et les hexagones.</li>
<li>en 3D, les tétraèdres, les pyramides, les prismes classiques, les hexaèdres, les prismes à base pentagonales (heptaèdres) et les prismes à base hexagonales (octaèdres).</li>
</ul>
<p>Arcane fournit deux types d'objets pour gérer la géométrie.</p><ul>
<li>le premier type et le plus simple est appelé un <b>élément géométrique</b> et contient uniquement les coordonnées des noeuds de cet élément. Ces classes ont pour nom le type de l'élément suivi de <b>Element</b>. Par exemple, pour les hexaèdres, le nom est <a class="el" href="../../d2/d66/classHexaedron8Element.html" title="Eléments géométriques de type GeomType::Hexaedron8.">Hexaedron8Element</a>.</li>
<li>le second type est appelé une <b>forme géométrique</b> et contient en plus des coordonnées des noeuds, les coordonnées des centres des faces, des milieux des arêtes et du centre ainsi que des informations sur la connectivité. Les formes géométriques sont gérées par la classe GeomShape et les vues sur ces formes géométriques par la classe GeomShapeView (anciennement GenericElement). En général, seule la vue est utilisée.</li>
</ul>
<h1><a class="anchor" id="arcanedoc_entities_geometric_geomelement"></a>
Éléments géométriques</h1>
<p>Le terme <b>élément géométrique</b> englobe l'ensemble des classes qui gèrent des éléments géométriques en conservant uniquement les coordonnées des sommets de ces éléments. Les différentes classes sont :</p><ul>
<li><a class="el" href="../../d1/d71/classTriangle3Element.html" title="Eléments géométriques de type GeomType::Triangle3.">Triangle3Element</a>;</li>
<li><a class="el" href="../../d5/dfe/classQuad4Element.html" title="Eléments géométriques de type GeomType::Quad4.">Quad4Element</a>;</li>
<li><a class="el" href="../../dd/dbe/classPentagon5Element.html" title="Eléments géométriques de type GeomType::Pentagon5.">Pentagon5Element</a>;</li>
<li><a class="el" href="../../d8/d5c/classHexagon6Element.html" title="Eléments géométriques de type GeomType::Hexagon6.">Hexagon6Element</a>;</li>
<li><a class="el" href="../../d2/da9/classTetraedron4Element.html" title="Eléments géométriques de type GeomType::Tetraedron4.">Tetraedron4Element</a>;</li>
<li><a class="el" href="../../d8/dfb/classPyramid5Element.html" title="Eléments géométriques de type GeomType::Pyramid5.">Pyramid5Element</a>;</li>
<li><a class="el" href="../../d6/db6/classPentaedron6Element.html" title="Eléments géométriques de type GeomType::Pentaedron6.">Pentaedron6Element</a>;</li>
<li><a class="el" href="../../d2/d66/classHexaedron8Element.html" title="Eléments géométriques de type GeomType::Hexaedron8.">Hexaedron8Element</a>;</li>
<li><a class="el" href="../../d1/d3e/classHeptaedron10Element.html" title="Eléments géométriques de type GeomType::Heptaedron10.">Heptaedron10Element</a>;</li>
<li><a class="el" href="../../dc/d1a/classOctaedron12Element.html" title="Eléments géométriques de type GeomType::Octaedron12.">Octaedron12Element</a>;</li>
</ul>
<p>Elles s'utilisent de la même manière, seul le nombre de coordonnées différe : </p><div class="fragment"><div class="line">Real3 x0,x1,x2,x3,x4,x5,x6,x7,x8;</div>
<div class="line"><a class="code hl_class" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a> quad(x0,x1,x2,x3); <span class="comment">// Création d&#39;un quad avec initialisation</span></div>
<div class="line"><a class="code hl_class" href="../../d2/d66/classHexaedron8Element.html">Hexaedron8Element</a> hexa; <span class="comment">// Création d&#39;un hexa non initialisé</span></div>
<div class="line">hexa.<a class="code hl_function" href="../../d2/d66/classHexaedron8Element.html#a11cdac271839a0e3837b67638db2a7fd">init</a>(x0,x1,x2,x3,x4,x5,x6,x7); <span class="comment">// Initialisation</span></div>
<div class="line">hexa[5] = Real3(1.2,0.0,0.0); <span class="comment">// Change la valeur du 6-ème sommet</span></div>
<div class="line">Real3 z = hexa[4]; <span class="comment">// Récupère la valeur du 5-ème sommet</span></div>
<div class="ttc" id="aclassHexaedron8Element_html"><div class="ttname"><a href="../../d2/d66/classHexaedron8Element.html">Hexaedron8Element</a></div><div class="ttdoc">Eléments géométriques de type GeomType::Hexaedron8.</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d5f/GeneratedGeomElement_8h_source.html#l00342">GeneratedGeomElement.h:344</a></div></div>
<div class="ttc" id="aclassHexaedron8Element_html_a11cdac271839a0e3837b67638db2a7fd"><div class="ttname"><a href="../../d2/d66/classHexaedron8Element.html#a11cdac271839a0e3837b67638db2a7fd">Hexaedron8Element::init</a></div><div class="ttdeci">void init(const Real3 &amp;a0, const Real3 &amp;a1, const Real3 &amp;a2, const Real3 &amp;a3, const Real3 &amp;a4, const Real3 &amp;a5, const Real3 &amp;a6, const Real3 &amp;a7)</div><div class="ttdoc">Initialise l'instance avec les coordonnées passées en argument.</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d5f/GeneratedGeomElement_8h_source.html#l00367">GeneratedGeomElement.h:367</a></div></div>
<div class="ttc" id="aclassQuad4Element_html"><div class="ttname"><a href="../../d5/dfe/classQuad4Element.html">Quad4Element</a></div><div class="ttdoc">Eléments géométriques de type GeomType::Quad4.</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d5f/GeneratedGeomElement_8h_source.html#l00054">GeneratedGeomElement.h:56</a></div></div>
</div><!-- fragment --><p>Les éléments géométriques s'utilisent en général via la notion de vue, à la manière des classes tableaux (Array, ArrayView et ConstArrayView). Il existe donc une vue modifiable et une vue constante pour chaque type d'élément géométrique. Pour obtenir le nom de la vue, il suffit d'ajouter <em>View</em> ou <em>ConstView</em> au nom de la classe: </p><div class="fragment"><div class="line"><a class="code hl_class" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a> quad;</div>
<div class="line"><a class="code hl_class" href="../../d8/d9b/classQuad4ElementView.html">Quad4ElementView</a> quad_view = quad.<a class="code hl_function" href="../../d5/dfe/classQuad4Element.html#aaee4766c44dfed133f969a646fca14e0">view</a>();</div>
<div class="line"><a class="code hl_class" href="../../d0/d35/classQuad4ElementConstView.html">Quad4ElementConstView</a> quad_const_view = quad.<a class="code hl_function" href="../../d5/dfe/classQuad4Element.html#a333c91a245adceb9d04d03425a76c7c9">constView</a>();</div>
<div class="ttc" id="aclassQuad4ElementConstView_html"><div class="ttname"><a href="../../d0/d35/classQuad4ElementConstView.html">Quad4ElementConstView</a></div><div class="ttdoc">Vue constante sur les éléments géométriques de type GeomType::Quad4.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/db7/GeneratedGeomElementView_8h_source.html#l00075">GeneratedGeomElementView.h:77</a></div></div>
<div class="ttc" id="aclassQuad4ElementView_html"><div class="ttname"><a href="../../d8/d9b/classQuad4ElementView.html">Quad4ElementView</a></div><div class="ttdoc">Vue modifiable sur les éléments géométriques de type GeomType::Quad4.</div><div class="ttdef"><b>Definition</b> <a href="../../d8/db7/GeneratedGeomElementView_8h_source.html#l00093">GeneratedGeomElementView.h:95</a></div></div>
<div class="ttc" id="aclassQuad4Element_html_a333c91a245adceb9d04d03425a76c7c9"><div class="ttname"><a href="../../d5/dfe/classQuad4Element.html#a333c91a245adceb9d04d03425a76c7c9">Quad4Element::constView</a></div><div class="ttdeci">ConstViewType constView() const</div><div class="ttdoc">Vue constante sur l'élément.</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d5f/GeneratedGeomElement_8h_source.html#l00087">GeneratedGeomElement.h:87</a></div></div>
<div class="ttc" id="aclassQuad4Element_html_aaee4766c44dfed133f969a646fca14e0"><div class="ttname"><a href="../../d5/dfe/classQuad4Element.html#aaee4766c44dfed133f969a646fca14e0">Quad4Element::view</a></div><div class="ttdeci">ViewType view()</div><div class="ttdoc">Vue modifiable sur l'élément.</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d5f/GeneratedGeomElement_8h_source.html#l00089">GeneratedGeomElement.h:89</a></div></div>
</div><!-- fragment --><p>La conversion d'un élément vers une vue peut se faire automatiquement :</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a> quad;</div>
<div class="line"><a class="code hl_class" href="../../d8/d9b/classQuad4ElementView.html">Quad4ElementView</a> quad_view = quad;</div>
<div class="line"><a class="code hl_class" href="../../d0/d35/classQuad4ElementConstView.html">Quad4ElementConstView</a> quad_const_view = quad;</div>
</div><!-- fragment --><h1><a class="anchor" id="arcanedoc_entities_geometric_geomshape"></a>
Formes géométriques</h1>
<p>Contrairement aux éléments géométriques, il n'existe qu'une seule classe pour gérer les formes géométriques. Cette classe s'appelle GeomShape et peut contenir les informations géométriques de n'importe quel type de maille définie dans l'énumération GeomType.</p>
<p>Une forme géométrique contient les coordonnées des noeuds, du centre des faces, du milieu des arêtes et du centre de la forme.</p>
<p>La forme géométrique s'utilise exclusivement via une vue sur une GeomShape. Cette vue est appelée GeomShapeView et contient toutes les méthodes pour récupérer les informations nécessaires sur la forme géométrique. Il existe aussi des vues spécifiques par type géométrique. Comme pour les vues sur les éléments géométriques, ces classes ont pour nom le type géométrique suffixé par <em>ShapeView:</em> </p><ul>
<li><a class="el" href="../../de/dca/classTriangle3ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Triangle3.">Triangle3ShapeView</a>;</li>
<li><a class="el" href="../../dd/df5/classQuad4ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Quad4.">Quad4ShapeView</a>;</li>
<li><a class="el" href="../../db/d09/classPentagon5ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Pentagon5.">Pentagon5ShapeView</a>;</li>
<li><a class="el" href="../../d4/d45/classHexagon6ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Hexagon6.">Hexagon6ShapeView</a>;</li>
<li><a class="el" href="../../d9/d66/classTetraedron4ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Tetraedron4.">Tetraedron4ShapeView</a>;</li>
<li><a class="el" href="../../d2/d56/classPyramid5ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Pyramid5.">Pyramid5ShapeView</a>;</li>
<li><a class="el" href="../../dd/d42/classPentaedron6ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Pentaedron6.">Pentaedron6ShapeView</a>;</li>
<li><a class="el" href="../../d3/da3/classHexaedron8ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Hexaedron8.">Hexaedron8ShapeView</a>;</li>
<li><a class="el" href="../../d1/d73/classHeptaedron10ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Heptaedron10.">Heptaedron10ShapeView</a>;</li>
<li><a class="el" href="../../d7/dea/classOctaedron12ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Octaedron12.">Octaedron12ShapeView</a>;</li>
</ul>
<p>Arcane gère deux utilisations possibles des formes géométriques :</p><ul>
<li>la forme géométrique associée à une maille du maillage. Pour cet usage, on utilise la classe GeomShapeMng qui conserve pour un maillage donné l'ensemble des informations nécessaires (voir la documentation de la classe GeomShapeMng pour son utilisation et son initialisation). La récupération d'une vue se fait comme suit : <div class="fragment"><div class="line">GeomShapeMng&amp; shape_mng;</div>
<div class="line">Cell cell;</div>
<div class="line">GeomShapeView shape_view;</div>
<div class="line"><span class="comment">// Initialisation à partir d&#39;une maille \a cell</span></div>
<div class="line">shape_mng.initShape(shape_view,cell);</div>
</div><!-- fragment --></li>
<li>la forme géométrique quelconque, qui n'est pas directement associée à une entité du maillage et qui peut être créée n'importe où. Elle peut être utilisée par exemple pour définir une forme géométrique sur les sous-volumes de contrôle d'une maille. Pour ce cas, il faut utiliser une instance de GeomShape pour conserver les informations. Cette instance doit rester valide tant qu'on souhaite utiliser la vue qui lui est associée. L'initialisation se fait soit avec un hexaèdre, soit avec un quadrangle (il est prévu dans une version ultérieure de pouvoir initialiser avec d'autres types). Par exemple, pour un hexaèdre : <div class="fragment"><div class="line">GeomShape shape;</div>
<div class="line"><a class="code hl_class" href="../../d2/d66/classHexaedron8Element.html">Hexaedron8Element</a> hexa;</div>
<div class="line"><span class="comment">// Initialisation à partir d&#39;un élément géométrique existant \a hexa.</span></div>
<div class="line"><a class="code hl_class" href="../../d3/da3/classHexaedron8ShapeView.html">Hexaedron8ShapeView</a> shape_view = shape.initFromHexaedron8(hexa);</div>
<div class="ttc" id="aclassHexaedron8ShapeView_html"><div class="ttname"><a href="../../d3/da3/classHexaedron8ShapeView.html">Hexaedron8ShapeView</a></div><div class="ttdoc">Vue spécifique sur les formes géométriques de type GeomType::Hexaedron8.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/db7/GeneratedGeomShapeView_8h_source.html#l00275">GeneratedGeomShapeView.h:277</a></div></div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="arcanedoc_entities_geometric_viewusage"></a>
Utilisation des vues</h1>
<dl class="section warning"><dt>Avertissement</dt><dd>Comme toutes les classes qui utilisent la notion de vue dans Arcane, les vues sur les objets géométriques ne restent valides que tant que le conteneur desquelles elles sont issues reste valide. En particulier, il faut restreindre leur utilisation au passage de paramètres entre méthodes et il ne faut <b>JAMAIS</b> conserver une vue au cours d'un calcul (comme champ d'une classe par exemple).</dd></dl>
<p>Lorsqu'on souhaite utilise un objet géométrique, le type des vues à utiliser dépend des coordonnées dont on a besoin :</p><ul>
<li>si on a besoin uniquement des coordonnées des noeuds de l'élément, il faut utiliser une vue sur un élément. La vue doit être constante si on ne modifie pas l'élément. Par exemple, pour une méthode qui calcule le volume d'un hexaèdre, il faut utiliser un <a class="el" href="../../dc/df7/classHexaedron8ElementConstView.html" title="Vue constante sur les éléments géométriques de type GeomType::Hexaedron8.">Hexaedron8ElementConstView</a> comme paramètre.</li>
<li>si on a besoin en plus des coordonnées des noeuds, des coordonnées des centres des faces, du milieu des arêtes ou du centre de l'élément, il faut utiliser une vue sur une forme. Si on ne connait pas exactement le type de la forme, il faut utiliser un GeomShapeView. Si on connait le type exact, il faut utiliser la vue correspondante. Par exemple, pour un quadrangle, un <a class="el" href="../../dd/df5/classQuad4ShapeView.html" title="Vue spécifique sur les formes géométriques de type GeomType::Quad4.">Quad4ShapeView</a>.</li>
</ul>
<p>Il existe aussi une class GeomShapeOperation qui permet d'obtenir une classe qui implémente IItemOperationByBasicType en fournissant uniquement les opérations pour une type de vue données (voir la documentation de GeomShapeOperation pour plus d'informations)</p>
<h2><a class="anchor" id="arcanedoc_entities_geometric_geomelementview"></a>
Utilisation des vues sur les éléments géométriques.</h2>
<p>Les vues sur les éléments doivent être utilisées partout où c'est possible, notamment au lieu de passer <em>N</em> coordonnées en argument. Par exemple, pour une méthode de calcul de la surface d'un quadrangle, au lieu de : </p><div class="fragment"><div class="line">Real computeSurface2D(<span class="keyword">const</span> Real3&amp; a0, <span class="keyword">const</span> Real3&amp; a1,</div>
<div class="line">                      <span class="keyword">const</span> Real3&amp; a2, <span class="keyword">const</span> Real3&amp; a3)</div>
<div class="line">{  </div>
<div class="line">  Real3 fst_diag = a2 - a0;</div>
<div class="line">  Real3 snd_diag = a3 - a1;</div>
<div class="line">  <span class="keywordflow">return</span> 0.5 * math::crossProduct2D(fst_diag,snd_diag);</div>
<div class="line">}</div>
</div><!-- fragment --><p>il vaut mieux utiliser :</p>
<div class="fragment"><div class="line">Real computeSurface2D(<a class="code hl_class" href="../../d0/d35/classQuad4ElementConstView.html">Quad4ElementConstView</a> quad)</div>
<div class="line">{  </div>
<div class="line">  Real3 fst_diag = quad[2] - quad[0];</div>
<div class="line">  Real3 snd_diag = quad[3] - quad[1];</div>
<div class="line">  <span class="keywordflow">return</span> 0.5 * math::crossProduct2D(fst_diag,snd_diag);</div>
<div class="line">}</div>
</div><!-- fragment --><p>L'intérêt d'utiliser la vue est multiple :</p><ul>
<li>Les éléments et formes géométriques peuvent facilement être convertibles en une vue : <div class="fragment"><div class="line"><span class="comment">// Utilisation avec un élément géométrique.</span></div>
<div class="line"><a class="code hl_class" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a> my_quad;</div>
<div class="line">computeSurface2D(my_quad);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Utilisation avec une forme géométrique</span></div>
<div class="line">GeomShapeMng&amp; shape_mng;</div>
<div class="line">Cell cell;</div>
<div class="line">GeomShapeView shape_view;</div>
<div class="line">shape_mng.initShape(shape_view,cell);</div>
<div class="line">computeSurface2D(shape_view.toQuad4Element());</div>
</div><!-- fragment --></li>
<li>il est possible de créer une vue à partir de <em>N</em> coordonnées : <div class="fragment"><div class="line"><span class="comment">// Utilisation à partir de 4 réels</span></div>
<div class="line">Real3 a0,a1,a2,a3;</div>
<div class="line">computeSurface2D(<a class="code hl_class" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a>(a0,a1,a2,a3));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Utilisation à partir d&#39;un tableau de 4 réels</span></div>
<div class="line">Real3 a[4];</div>
<div class="line">computeSurface2D(<a class="code hl_class" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a>(Real3ConstArrayView(4,a)));</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Utilisation à partir des coordonnées d&#39;une entité.</span></div>
<div class="line">VariableNodeReal3&amp; node_coords;</div>
<div class="line">Face face;</div>
<div class="line">computeSurface2D(<a class="code hl_class" href="../../d5/dfe/classQuad4Element.html">Quad4Element</a>(node_coords,face));</div>
</div><!-- fragment --></li>
<li>possibilité de spécialiser les opérations lorsqu'on utilise des</li>
<li>templates et notamment de faire la distinction entre les</li>
<li>opérations qui prennent le même nombre de coordonnées mais qui</li>
<li>opèrent sur des éléments différents (par exemple entre un Quad4 et</li>
<li>un Tetraedron4)</li>
<li>à terme, possibilité de vectoriser plus facilement.</li>
</ul>
<p>La vue sur les éléments géométriques permet donc d'unifier plusieurs mécanismes d'appels et doit donc être utilisée dans tous les cas où cela est possible (i.e. c'est-à-dire tout le temps). En particulier, les méthodes qui prennent <em>N</em> coordonnées en argument peuvent toujours être remplacées par une méthode qui prend une vue de l'élément correspondant.</p>
<h2><a class="anchor" id="arcanedoc_entities_geometric_geomshapeview"></a>
Utilisation des GeomShapeView</h2>
<p>Les GeomShapeView sont optimisées pour les calculs géométriques au sein d'une maille. Il est donc préférable de les utiliser plutôt que d'aller chercher à chaque fois les coordonnées des noeuds d'une maille en passant par la variable IMesh::nodesCoordinates(). En particulier, elles utilisent une structure de donnée qui est optimisée pour la gestion du cache et pour la vectorisation. De plus, elles permettront à terme de gérer des formes géométriques correspondantes à des éléments finis d'ordre 2 ou supérieur.</p>
<p>Par exemple, pour récupérer le milieu des noeuds 3 et 4 d'une maille : </p><div class="fragment"><div class="line"><span class="comment">// Méthode classique</span></div>
<div class="line">VariableNodeReal3&amp; node_coord = ...;</div>
<div class="line"><a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a>(icell,allCells()){</div>
<div class="line">  Cell cell = *icell;</div>
<div class="line">  Real3 middle = (node_coord[cell.node(3)] + node_coord[cell.node(4)]) / 2.0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Méthode optimisée.</span></div>
<div class="line">GeomShapeMng&amp; shape_mng = ...;</div>
<div class="line">GeomShapeView shape;</div>
<div class="line"><a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a>(icell,allCells()){</div>
<div class="line">  shape_mng.initShape(shape,*icell);</div>
<div class="line">  Real3 middle = (shape.node(3) + shape.node(4)) / 2.0;</div>
<div class="line">}</div>
<div class="ttc" id="aItemEnumerator_8h_html_aaf5910d68ad8428248f844535ab071f3"><div class="ttname"><a href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3">ENUMERATE_CELL</a></div><div class="ttdeci">#define ENUMERATE_CELL(name, group)</div><div class="ttdoc">Enumérateur générique d'un groupe de mailles.</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d0f/ItemEnumerator_8h_source.html#l00427">ItemEnumerator.h:427</a></div></div>
</div><!-- fragment --><hr  />
<div class="section_buttons"> <span class="back_section_button"> <a class="el" href="../../db/d7c/arcanedoc_entities_itemtype.html">Les types de mailles</a> </span></div><div class="section_buttons"></div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
  <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li><li class="navelem"><a class="el" href="../../d0/d59/arcanedoc_entities.html">Entités, maillages et connectivités</a></li>
      <li class="footer">Généré le Lundi 22 Juillet 2024 02:43:18 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
    </ul>
  </div>
  <script type="text/javascript" src="../../script-apply-config-theme.js"></script>
  <script type="text/javascript">
    // On met l'appel à cette fonction dans le footer dans le cas où
    // une page ne veut pas de personnalisation (changement de la 
    // variable globale "no_custom_theme").
    applyConfigWithCookies();
  </script>
</body>
</html>
