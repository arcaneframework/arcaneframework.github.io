<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="../../logo_arcane.svg" type="image/svg+xml">
    <title>Arcane: Exemple n°5</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../user_colors.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
    <script type="text/javascript" src="../../script-helper.js"></script>
    <script type="text/javascript" src="../../script-resize.js"></script>
    <script type="text/javascript" src="../../script-num-lines-code.js"></script>
    <script type="text/javascript" src="../../script-config-theme.js"></script>
    <script type="text/javascript" src="../../script-edit-config-theme.js"></script>
    <script type="text/javascript" src="../../script-alternative-theme.js"></script>
    <script type="text/javascript">
      // On demande l'activation de la personnalisation de la page.
      var no_custom_theme = false;
      DoxygenAwesomeDarkModeToggle.title = "Thème clair/sombre";
      DoxygenAwesomeDarkModeToggle.init();
      DoxygenAwesomeFragmentCopyButton.title = "Copier le code dans le presse-papier";
      DoxygenAwesomeFragmentCopyButton.init();
      DoxygenAwesomeParagraphLink.init();
      DoxygenAwesomeInteractiveToc.init();
      DoxygenAwesomeTabs.init()
      waitElemForResizeSideNav();
      setOldSize();
      //waitItemExpandCurrent();
    </script>
  </head>
  <body>
    <!--BEGIN CORNER_GITHUB-->
    <!-- https://tholman.com/github-corners/ -->
    <a href="https://github.com/arcaneframework/framework" class="github-corner" aria-label="Voir les sources sur GitHub">
      <svg width="70" height="70" viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg>
    </a>
    <!--END CORNER_GITHUB-->
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectlogo">
                  <a href="../../index.html" title="Aller à la page principale">
                    <img alt="Logo" src="../../arcane_framework_small.webp" />
                  </a>
                </td>
              </tr>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">Arcane
                    <span id="projectnumber">&#160;v3.15.3.0</span>
                  </div>
                  <div id="projectbrief">Documentation utilisateur</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part -->
<!-- Généré par Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dd/def/arcanedoc_services_modules_simplecsvoutput_example5.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Exemple n°5</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table des matières</h3>
<ul><li class="level1"><a href="#autotoc_md181">Point d&#39;entrée initial</a></li>
<li class="level1"><a href="#autotoc_md182">Point d&#39;entrée loop</a></li>
<li class="level1"><a href="#autotoc_md183">Point d&#39;entrée exit</a></li>
</ul>
</div>
<div class="textblock"><p>Dans cet exemple, on va montrer un exemple d'utilisation de lecture/ remplissage du tableau via la position d'un pointeur.</p>
<p>En effet, jusque-là, on a rempli nos tableaux de valeurs avec les noms de lignes/colonnes, en mettant les valeurs les une à côté des autres. <br  />
 Il se trouve qu'en interne, lorsqu'un élément est ajouté ou modifié, il y a un pointeur qui se met à jour et qui pointe vers le dernier élément manipulé.</p>
<dl class="section remark"><dt>Remarques</dt><dd>Pointeur dans le sens "pointeur vers une position du tableau 2D", pas dans le sens "pointeur `C` vers une zone mémoire".</dd></dl>
<p>On va donc pouvoir utiliser ce pointeur pour modifier des valeurs autour de la dernière valeur manipulée.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Results_Example5   </th><th class="markdownTableHeadNone">Iteration 1   </th><th class="markdownTableHeadNone">Iteration 2   </th><th class="markdownTableHeadNone">Iteration 3   </th><th class="markdownTableHeadNone">Somme    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Nb de Fissions   </td><td class="markdownTableBodyNone">36   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">85   </td><td class="markdownTableBodyNone">121    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Nb de Fissions (div par 2)   </td><td class="markdownTableBodyNone">18   </td><td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">42.5   </td><td class="markdownTableBodyNone">60.5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Nb de Collisions   </td><td class="markdownTableBodyNone">29   </td><td class="markdownTableBodyNone">84   </td><td class="markdownTableBodyNone">21   </td><td class="markdownTableBodyNone">134    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Nb de Collisions (div par 2)   </td><td class="markdownTableBodyNone">14.5   </td><td class="markdownTableBodyNone">42   </td><td class="markdownTableBodyNone">10.5   </td><td class="markdownTableBodyNone">67   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md181"></a>
Point d'entrée initial</h1>
<p>Voyons le point d'entrée <code>start-init</code> :</p>
<p><code>SimpleTableOutputExample5Module.cc</code> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> SimpleTableOutputExample5Module::</div>
<div class="line">initModule()</div>
<div class="line">{</div>
<div class="line">  srand(1234);</div>
<div class="line">  options()-&gt;stOutput()-&gt;init();</div>
<div class="line"> </div>
<div class="line">  StringUniqueArray columns_name(NB_ITER);</div>
<div class="line">  <span class="keywordflow">for</span>(Integer i = 0; i &lt; NB_ITER; i++){</div>
<div class="line">    columns_name[i] = <span class="stringliteral">&quot;Iteration &quot;</span> + String::fromNumber(i+1);</div>
<div class="line">  }</div>
<div class="line">  options()-&gt;stOutput()-&gt;addColumns(columns_name);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// On ajoute aussi quatre lignes.</span></div>
<div class="line">  <span class="comment">// Toujours dans un soucis d&#39;optimisation, on peut créer les lignes et récupérer</span></div>
<div class="line">  <span class="comment">// leur position pour la suite, ainsi, on évite deux recherches de String dans un</span></div>
<div class="line">  <span class="comment">// tableau de String à chaque itération.</span></div>
<div class="line">  options()-&gt;stOutput()-&gt;addRows(StringUniqueArray{</div>
<div class="line">    <span class="stringliteral">&quot;Nb de Fissions&quot;</span>, </div>
<div class="line">    <span class="stringliteral">&quot;Nb de Fissions (div par 2)&quot;</span>, </div>
<div class="line">    <span class="stringliteral">&quot;Nb de Collisions&quot;</span>, </div>
<div class="line">    <span class="stringliteral">&quot;Nb de Collisions (div par 2)&quot;</span>});</div>
<div class="line"> </div>
<div class="line">  pos_fis = options()-&gt;stOutput()-&gt;rowPosition(<span class="stringliteral">&quot;Nb de Fissions&quot;</span>);</div>
<div class="line">  pos_col = options()-&gt;stOutput()-&gt;rowPosition(<span class="stringliteral">&quot;Nb de Collisions&quot;</span>);</div>
<div class="line"> </div>
<div class="line">  options()-&gt;stOutput()-&gt;print();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Ici, rien de bien original, mis à part les deux lignes en plus : <code>(div par 2)</code>. Ces deux lignes vont contenir le nombre de fissions/collisions d'une itération divisé par 2.</p>
<h1><a class="anchor" id="autotoc_md182"></a>
Point d'entrée loop</h1>
<p>Voyons le point d'entrée <code>compute-loop</code> :</p>
<p><code>SimpleTableOutputExample5Module.cc</code> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> SimpleTableOutputExample5Module::</div>
<div class="line">loopModule()</div>
<div class="line">{</div>
<div class="line">  Integer nb_fissions = rand()%99;</div>
<div class="line">  Integer nb_collisions = rand()%99;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Ici, on utilise editElementDown() pour ajouter un élement sous l&#39;élement dernièrement</span></div>
<div class="line">  <span class="comment">// modifié.</span></div>
<div class="line">  options()-&gt;stOutput()-&gt;addElementInRow(pos_fis, nb_fissions);</div>
<div class="line">  options()-&gt;stOutput()-&gt;editElementDown(nb_fissions/2.);</div>
<div class="line">  options()-&gt;stOutput()-&gt;addElementInRow(pos_col, nb_collisions);</div>
<div class="line">  options()-&gt;stOutput()-&gt;editElementDown(nb_collisions/2.);</div>
<div class="line"> </div>
<div class="line">  options()-&gt;stOutput()-&gt;print();</div>
<div class="line">  <span class="keywordflow">if</span> (m_global_iteration() == NB_ITER)</div>
<div class="line">    subDomain()-&gt;timeLoopMng()-&gt;stopComputeLoop(<span class="keyword">true</span>);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Une nouvelle méthode fait son apparition : <a class="el" href="../../d6/de8/classArcane_1_1ISimpleTableOutput.html#a170f7a7e9f44800775b895550ba8990c">ISimpleTableOutput::editElementDown()</a>. <br  />
 Cette méthode permet de modifier la "case" sous la "case" que l'on vient de modifier. <br  />
 Prenons les deux lignes dédiées à la fission. La première ligne ajoute une valeur sur la ligne <code>Nb de Fissions</code>. <br  />
 En interne, un pointeur est modifié et pointe désormais sur la valeur que l'on vient d'ajouter. <br  />
 La seconde ligne appelle la nouvelle méthode. Cette méthode va prendre le pointeur, va rechercher la "case" en dessous et va remplacer sa valeur par <code>nb_fissions/2</code>. Par défaut, le pointeur sera alors mis à jour et pointera vers cette "case" manipulée. Donc si on voulait ajouter, par exemple, <code>nb_fissions*2</code> juste en dessous, on pourrai refaire un appel à la méthode <a class="el" href="../../d6/de8/classArcane_1_1ISimpleTableOutput.html#a170f7a7e9f44800775b895550ba8990c">ISimpleTableOutput::editElementDown()</a> juste après.</p>
<p>Dans le cas où il y aurai une modification de <code>nb_fissions</code> entre les deux lignes (sans toucher au tableau) :</p>
<div class="fragment"><div class="line">options()-&gt;csvOutput()-&gt;addElementInRow(pos_fis, nb_fissions);</div>
<div class="line">nb_fissions += 456;</div>
<div class="line">options()-&gt;csvOutput()-&gt;editElementDown(nb_fissions/2.); <span class="comment">// Pas la bonne valeur !!!</span></div>
</div><!-- fragment --><p> On pourrai faire ça :</p>
<div class="fragment"><div class="line">options()-&gt;csvOutput()-&gt;addElementInRow(pos_fis, nb_fissions);</div>
<div class="line">nb_fissions += 456;</div>
<div class="line">options()-&gt;csvOutput()-&gt;editElementDown(element()/2.); <span class="comment">// C&#39;est correct !!!</span></div>
</div><!-- fragment --><p><a class="el" href="../../d6/de8/classArcane_1_1ISimpleTableOutput.html#ac1085e0647dd010753ba213530aaa79a">ISimpleTableOutput::element()</a> est une méthode qui permet de récupérer la valeur de la "case" pointé par le pointeur. Ça peut être pratique dans ce cas là par exemple (on est d'accord que si on n'utilise pas le pointeur et les méthodes associées, c'est une méthode qui ne sert à rien).</p>
<dl class="section note"><dt>Note</dt><dd>Il n'y a pas que la méthode <a class="el" href="../../d6/de8/classArcane_1_1ISimpleTableOutput.html#a170f7a7e9f44800775b895550ba8990c">ISimpleTableOutput::editElementDown()</a>, il existe des méthodes équivalentes pour les quatre directions : <br  />
 <a class="el" href="../../d6/de8/classArcane_1_1ISimpleTableOutput.html#a4a5b2863a64d59e40b04953f46d32c70">ISimpleTableOutput::editElementUp()</a> <br  />
 <a class="el" href="../../d6/de8/classArcane_1_1ISimpleTableOutput.html#afd66862d133c1ccecec0cf2370f8a215">ISimpleTableOutput::editElementLeft()</a> <br  />
 <a class="el" href="../../d6/de8/classArcane_1_1ISimpleTableOutput.html#a3ad4e7c58ba4c7d5ad8c075a970b4c8b">ISimpleTableOutput::editElementRight()</a> <br  />
 Idem pour <a class="el" href="../../d6/de8/classArcane_1_1ISimpleTableOutput.html#ac1085e0647dd010753ba213530aaa79a">ISimpleTableOutput::element()</a>.</dd></dl>
<h1><a class="anchor" id="autotoc_md183"></a>
Point d'entrée exit</h1>
<p>Enfin, voyons le point d'entrée <code>exit</code> :</p>
<p><code>SimpleTableOutputExample5Module.cc</code> </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> SimpleTableOutputExample5Module::</div>
<div class="line">endModule()</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">for</span>(Integer pos = 0; pos &lt; options()-&gt;stOutput()-&gt;numberOfRows(); pos++) {</div>
<div class="line">    RealUniqueArray row = options()-&gt;stOutput()-&gt;row(pos);</div>
<div class="line">    Real sum = 0.;</div>
<div class="line">    <span class="keywordflow">for</span>(Real elem : row) {</div>
<div class="line">      sum += elem;</div>
<div class="line">    }</div>
<div class="line">    options()-&gt;stOutput()-&gt;addElementInColumn(<span class="stringliteral">&quot;Somme&quot;</span>, sum);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  options()-&gt;stOutput()-&gt;print();</div>
<div class="line">  options()-&gt;stOutput()-&gt;writeFile();</div>
<div class="line">}</div>
</div><!-- fragment --><p>Ce point d'entrée est identique à celui de l'exemple précédent.</p>
<hr  />
<div class="section_buttons"> <span class="back_section_button"> <a class="el" href="../../dd/d41/arcanedoc_services_modules_simplecsvoutput_example4.html">Exemple n°4</a> </span> <span class="next_section_button"> <a class="el" href="../../da/db6/arcanedoc_services_modules_simplecsvoutput_example6.html">Exemple n°6</a> </span> </div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
  <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li><li class="navelem"><a class="el" href="../../db/dc1/arcanedoc_services_modules.html">Services et modules disponibles</a></li><li class="navelem"><a class="el" href="../../de/dc3/arcanedoc_services_modules_simplecsvoutput.html">Service SimpleCsvOutput</a></li>
      <li class="footer">Généré le Lundi 10 Février 2025 02:47:19 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
    </ul>
  </div>
  <script type="text/javascript" src="../../script-apply-config-theme.js"></script>
  <script type="text/javascript">
    // On met l'appel à cette fonction dans le footer dans le cas où
    // une page ne veut pas de personnalisation (changement de la 
    // variable globale "no_custom_theme").
    applyConfigWithCookies();
  </script>
</body>
</html>
