<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Arcane: Configuration du code (.CONFIG)</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../user_colors.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
    <script type="text/javascript" src="../../script-helper.js"></script>
    <script type="text/javascript" src="../../script-resize.js"></script>
    <script type="text/javascript" src="../../script-num-lines-code.js"></script>
    <script type="text/javascript" src="../../script-config-theme.js"></script>
    <script type="text/javascript" src="../../script-edit-config-theme.js"></script>
    <script type="text/javascript" src="../../script-alternative-theme.js"></script>
    <script type="text/javascript">
      // On demande l'activation de la personnalisation de la page.
      var no_custom_theme = false;
      DoxygenAwesomeDarkModeToggle.title = "Thème clair/sombre";
      DoxygenAwesomeDarkModeToggle.init();
      DoxygenAwesomeFragmentCopyButton.title = "Copier le code dans le presse-papier";
      DoxygenAwesomeFragmentCopyButton.init();
      DoxygenAwesomeParagraphLink.init();
      DoxygenAwesomeInteractiveToc.init();
      DoxygenAwesomeTabs.init()
      waitElemForResizeSideNav();
      setOldSize();
      //waitItemExpandCurrent();
    </script>
  </head>
  <body>
    <!--BEGIN CORNER_GITHUB-->
    <!-- https://tholman.com/github-corners/ -->
    <a href="https://github.com/arcaneframework/framework" class="github-corner" aria-label="Voir les sources sur GitHub">
      <svg width="70" height="70" viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg>
    </a>
    <!--END CORNER_GITHUB-->
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectlogo">
                  <a href="../../index.html" title="Aller à la page principale">
                    <img alt="Logo" src="../../arcane_logo.webp" />
                  </a>
                </td>
              </tr>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">Arcane
                    <span id="projectnumber">&#160;v3.12.18.0</span>
                  </div>
                  <div id="projectbrief">Documentation utilisateur</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part --><!-- Généré par Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('de/d13/arcanedoc_core_types_codeconfig.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Configuration du code (.CONFIG)</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table des matières</h3>
<ul><li class="level1"><a href="#arcanedoc_core_types_codeconfig_intro">Introduction</a></li>
<li class="level1"><a href="#arcanedoc_core_types_codeconfig_struct">Structure du fichier</a></li>
<li class="level1"><a href="#arcanedoc_core_types_codeconfig_timeloop">L&#39;élément &lt;time-loops&gt;</a><ul><li class="level2"><a href="#arcanedoc_core_types_codeconfig_modules">L&#39;élément &lt;modules&gt;</a></li>
<li class="level2"><a href="#arcanedoc_core_types_codeconfig_singletonservices">L&#39;élément &lt;singleton-services&gt;</a></li>
<li class="level2"><a href="#arcanedoc_core_types_codeconfig_entrypoints">L&#39;élément &lt;entry-points&gt;</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="arcanedoc_core_types_codeconfig_intro"></a>
Introduction</h1>
<p>La configuration du code est décrite dans un fichier externe, dont le nom est CODE.config, avec <em>CODE</em> le nom du code.</p>
<p>Ce fichier décrit l'ensemble des boucles en temps (voir <a class="el" href="../../d4/d6d/arcanedoc_core_types_timeloop.html">Boucle en temps</a>) disponibles pour le code, ainsi que leur configuration.</p>
<h1><a class="anchor" id="arcanedoc_core_types_codeconfig_struct"></a>
Structure du fichier</h1>
<p>Ce fichier de configuration de l'application est au format XML. Voici un exemple d'un tel fichier pour un module <em>MicroHydro</em> qui se trouve dans le répertoire des exemples de ARCANE (<code>samples</code>):</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span>?&gt;</div>
<div class="line">&lt;<span class="keywordtype">arcane-config</span> <span class="keyword">code-name</span>=<span class="stringliteral">&quot;MicroHydro&quot;</span>&gt;</div>
<div class="line"> &lt;<span class="keywordtype">time-loops</span>&gt;</div>
<div class="line">  &lt;<span class="keywordtype">time-loop</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydroLoop&quot;</span>&gt;</div>
<div class="line">   &lt;<span class="keywordtype">title</span>&gt;<span class="keyword">MicroHydro</span>&lt;/<span class="keywordtype">title</span>&gt;</div>
<div class="line">   &lt;<span class="keywordtype">description</span>&gt;<span class="keyword">Boucle</span> <span class="keyword">en</span> <span class="keyword">temps</span> <span class="keyword">de</span> <span class="keyword">l</span>&#39;<span class="keyword">exemple</span> <span class="keyword">Arcane</span> <span class="keyword">MicroHydro</span>&lt;/<span class="keywordtype">description</span>&gt;</div>
<div class="line"> </div>
<div class="line">   &lt;<span class="keywordtype">modules</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro&quot;</span> <span class="keyword">need</span>=<span class="stringliteral">&quot;required&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">module</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ArcanePostProcessing&quot;</span> <span class="keyword">need</span>=<span class="stringliteral">&quot;required&quot;</span> /&gt;</div>
<div class="line">   &lt;/<span class="keywordtype">modules</span>&gt;</div>
<div class="line"> </div>
<div class="line">   &lt;<span class="keywordtype">singleton-services</span>&gt;</div>
<div class="line">   &lt;/<span class="keywordtype">singleton-services</span>&gt;</div>
<div class="line"> </div>
<div class="line">   &lt;<span class="keywordtype">entry-points</span> <span class="keyword">where</span>=<span class="stringliteral">&quot;init&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.HydroStartInit&quot;</span> /&gt;</div>
<div class="line">   &lt;/<span class="keywordtype">entry-points</span>&gt;</div>
<div class="line"> </div>
<div class="line">   &lt;<span class="keywordtype">entry-points</span> <span class="keyword">where</span>=<span class="stringliteral">&quot;compute-loop&quot;</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.ComputePressureForce&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.ComputeVelocity&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.ApplyBoundaryCondition&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.MoveNodes&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.ComputeGeometricValues&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.UpdateDensity&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.ApplyEquationOfState&quot;</span> /&gt;</div>
<div class="line">    &lt;<span class="keywordtype">entry-point</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;MicroHydro.ComputeDeltaT&quot;</span> /&gt;</div>
<div class="line">   &lt;/<span class="keywordtype">entry-points</span>&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;/<span class="keywordtype">time-loop</span>&gt;</div>
<div class="line"> &lt;/<span class="keywordtype">time-loops</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">arcane-config</span>&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="arcanedoc_core_types_codeconfig_timeloop"></a>
L'élément &lt;time-loops&gt;</h1>
<p>L'ensemble des boucles en temps est décrit dans l'élément <code>&lt;time-loops&gt;</code>. Chaque boucle en temps est représentée par l'élément <code>&lt;time-loop&gt;</code> et identifiée par son nom (attribut <code>name</code>). Le fichier précédent décrit donc une seule boucle en temps nommée <em>MicroHydroLoop</em>.</p>
<p>Outre le titre et la description de la boucle, on remarque 3 éléments : <code>&lt;modules&gt;</code>, <code>&lt;singleton-services&gt;</code> et <code>&lt;entry-points&gt;</code>.</p>
<h2><a class="anchor" id="arcanedoc_core_types_codeconfig_modules"></a>
L'élément &lt;modules&gt;</h2>
<p>Cet élément décrit l'ensemble des modules du code nécessaire à l'exécution de la boucle en temps. L'attribut <code>name</code> identifie le module par son nom et l'attribut <code>need</code> (valant <b>required</b> ou <b>optional</b>) indique si le module doit obligatoirement être présent ou non. Si le module n'est pas obligatoire et qu'il n'est pas fourni à l'exécution (absence de la bibliothèque du module), ses points d'entrée seront ignorés. Cela permet de construire des variantes d'une même boucle en temps.</p>
<h2><a class="anchor" id="arcanedoc_core_types_codeconfig_singletonservices"></a>
L'élément &lt;singleton-services&gt;</h2>
<p>Cet élément est assez similaire à <code>&lt;modules&gt;</code> et décrit l'ensemble des services singletons du code utilisés lors de l'exécution. Un service singleton est un service pour lequel il n'existe qu'une seule instance qui est créée lors de l'initialisation du code. Un tel service peut avoir des options dans le jeu de données. La spécification des services singletons se fait comme suit :</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">singleton-services</span>&gt;</div>
<div class="line"> &lt;<span class="keywordtype">service</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Toto&quot;</span> <span class="keyword">need</span>=<span class="stringliteral">&quot;required&quot;</span>&gt;</div>
<div class="line"> &lt;<span class="keywordtype">service</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Tutu&quot;</span> <span class="keyword">need</span>=<span class="stringliteral">&quot;optional&quot;</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">singleton-services</span>&gt;</div>
</div><!-- fragment --><p>Comme pour le module, il y a deux attributs <code>name</code> et <code>need</code>. Si le service est optionnel et qu'il n'est pas trouvé, il ne sera pas instantié. Dans le code, il est possible de récupérer un service singleton dont on connait l'interface, via la classe ServiceBuilder. Exemple :</p>
<div class="fragment"><div class="line">m_toto = ServiceBuilder&lt;IToto&gt;(subDomain()).getSingleton();</div>
</div><!-- fragment --><p>Avec Toto implémentant l'interface IToto.</p>
<h2><a class="anchor" id="arcanedoc_core_types_codeconfig_entrypoints"></a>
L'élément &lt;entry-points&gt;</h2>
<p>Cet élément contient l'attribut <code>where</code> précisant l'endroit d'appel des différents points d'entrée. Les valeurs possibles sont décrites dans le tableau ci-dessous :</p>
<table class="doxtable">
<tr>
<th>Valeur </th><th><p class="starttd">Description </p>
<p class="endtd"></p>
</th></tr>
<tr>
<td><b>build</b>  </td><td><p class="starttd">Appel du point d'entrée à la création du module. Lors de la création du module, le maillage n'est pas encore chargé et il ne doit donc pas être utilisé. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>init</b>  </td><td><p class="starttd">Appel du point d'entrée lors de l'initialisation du code. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>compute-loop</b>  </td><td><p class="starttd">Appel du point d'entrée dans la boucle des itérations. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>restore</b>  </td><td><p class="starttd">Appel du point d'entrée lors d'un retour arrière. </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>on-mesh-changed</b>  </td><td><p class="starttd">Appel du point d'entrée lors d'un changement de la structure de maillage (partitionnement, abandon de mailles...). </p>
<p class="endtd"></p>
</td></tr>
<tr>
<td><b>exit</b>  </td><td><p class="starttd">Appel du point d'entrée avant la sortie du code : fin de simulation, arrêt avant reprise... </p>
<p class="endtd"></p>
</td></tr>
</table>
<p>L'élément <code>&lt;entry-points&gt;</code> contient une liste de points d'entrée nommés <em>nom_du_module.nom_du_point_d'entrée</em>. La valeur de l'attribut <code>where</code> de chaque point d'entrée (faite dans <a class="el" href="../../dc/d6a/arcanedoc_core_types_module.html#arcanedoc_core_types_module_desc">le descripteur de module</a>) doit être compatible avec celle de l'attribut <code>where</code> du bloc <code>&lt;entry-points&gt;</code>. Dans un bloc <em>init</em> ne peuvent être présent que des points d'entrée dont l'attribut <code>where</code> vaut <b>init</b>, <b>start-init</b>, <b>continue-init</b>. Pour les autres blocs (<b>compute-loop</b>, <b>restore</b>, <b>on-mesh-changed</b>, <b>exit</b>), les valeurs des 2 attributs <code>where</code> doivent être identiques.</p>
<hr  />
<div class="section_buttons"> <span class="back_section_button"> <a class="el" href="../../d5/dcd/arcanedoc_core_types_casefile.html">Jeu de données (.ARC)</a> </span> <span class="next_section_button"> <a class="el" href="../../d4/d6d/arcanedoc_core_types_timeloop.html">Boucle en temps</a> </span> </div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
  <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li><li class="navelem"><a class="el" href="../../d4/dc9/arcanedoc_core_types.html">Types fondamentaux</a></li>
      <li class="footer">Généré le Lundi 20 Mai 2024 02:24:58 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
    </ul>
  </div>
  <script type="text/javascript" src="../../script-apply-config-theme.js"></script>
  <script type="text/javascript">
    // On met l'appel à cette fonction dans le footer dans le cas où
    // une page ne veut pas de personnalisation (changement de la 
    // variable globale "no_custom_theme").
    applyConfigWithCookies();
  </script>
</body>
</html>
