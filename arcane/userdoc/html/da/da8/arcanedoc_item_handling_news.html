<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="../../logo_arcane.svg" type="image/svg+xml">
    <title>Arcane: Modifications dans la gestions des entités</title>
    <link href="../../tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../jquery.js"></script>
    <script type="text/javascript" src="../../dynsections.js"></script>
    <link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
    <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
    <link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-custom.css" rel="stylesheet" type="text/css"/>
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
<link href="../../user_colors.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-interactive-toc.js"></script>
    <script type="text/javascript" src="../../doxygen-awesome-tabs.js"></script>
    <script type="text/javascript" src="../../script-helper.js"></script>
    <script type="text/javascript" src="../../script-resize.js"></script>
    <script type="text/javascript" src="../../script-num-lines-code.js"></script>
    <script type="text/javascript" src="../../script-config-theme.js"></script>
    <script type="text/javascript" src="../../script-edit-config-theme.js"></script>
    <script type="text/javascript" src="../../script-alternative-theme.js"></script>
    <script type="text/javascript">
      // On demande l'activation de la personnalisation de la page.
      var no_custom_theme = false;
      DoxygenAwesomeDarkModeToggle.title = "Thème clair/sombre";
      DoxygenAwesomeDarkModeToggle.init();
      DoxygenAwesomeFragmentCopyButton.title = "Copier le code dans le presse-papier";
      DoxygenAwesomeFragmentCopyButton.init();
      DoxygenAwesomeParagraphLink.init();
      DoxygenAwesomeInteractiveToc.init();
      DoxygenAwesomeTabs.init()
      waitElemForResizeSideNav();
      setOldSize();
      //waitItemExpandCurrent();
    </script>
  </head>
  <body>
    <!--BEGIN CORNER_GITHUB-->
    <!-- https://tholman.com/github-corners/ -->
    <a href="https://github.com/arcaneframework/framework" class="github-corner" aria-label="Voir les sources sur GitHub">
      <svg width="70" height="70" viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor" class="octo-body"></path>
      </svg>
    </a>
    <!--END CORNER_GITHUB-->
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectlogo">
                  <a href="../../index.html" title="Aller à la page principale">
                    <img alt="Logo" src="../../arcane_framework_small.webp" />
                  </a>
                </td>
              </tr>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">Arcane
                    <span id="projectnumber">&#160;v3.14.0.0</span>
                  </div>
                  <div id="projectbrief">Documentation utilisateur</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part -->
<!-- Généré par Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('da/da8/arcanedoc_item_handling_news.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Chargement...</div>
<div class="SRStatus" id="Searching">Recherche...</div>
<div class="SRStatus" id="NoMatches">Aucune correspondance</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Modifications dans la gestions des entités</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table des matières</h3>
<ul><li class="level1"><a href="#arcanedoc_news_37">Modifications dans la version 3.7</a></li>
<li class="level1"><a href="#autotoc_md5">Modifications dans la version 3.10</a><ul><li class="level2"><a href="#autotoc_md6">Séparer la gestion de la connectivité des entités de celle des liste d&#39;entités d&#39;un groupe</a></li>
<li class="level2"><a href="#autotoc_md7">Masquer la structure interne gérant les listes de localId()</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Cette page regroupe les modifications relatives à la gestion des connectivités des entités lors des différentes versions de Arcane.</p>
<h1><a class="anchor" id="arcanedoc_news_37"></a>
Modifications dans la version 3.7</h1>
<p>La version 3.7 de Arcane apporte plusieurs modifications dans la gestion des entités du maillage. Ces modifications ont pour objectif:</p>
<ul>
<li>de réduire l'empreinte mémoire</li>
<li>de pouvoir accéder sur accélérateurs à certaines informations sur les entités comme par exemple <a class="el" href="../../df/d5f/classArcane_1_1Item.html#a5651b2880e289af4cf8b93ef9164272c" title="Numéro du sous-domaine propriétaire de l&#39;entité">Arcane::Item::owner()</a>.</li>
<li>d'améliorer les performances</li>
</ul>
<p>Pour répondre à ces objectifs, les modifications suivantes ont été apportées:</p>
<ul>
<li>La classe <a class="el" href="../../df/d0b/classArcane_1_1ItemSharedInfo.html">Arcane::ItemSharedInfo</a> ne contient plus d'informations spécifiques sur une entité. Il n'y a donc besoin que d'une seule instance de cette classe par <a class="el" href="../../dd/d0a/classArcane_1_1IItemFamily.html" title="Interface d&#39;une famille d&#39;entités.">Arcane::IItemFamily</a>. La méthode Arcane::mesh::ItemFamily::commonItemSharedInfo() permet de récupérer cette instance.</li>
<li>Comme il n'y a plus qu'une seule instance de <a class="el" href="../../df/d0b/classArcane_1_1ItemSharedInfo.html">Arcane::ItemSharedInfo</a>, l'utilisation de <a class="el" href="../../dd/df1/classArcane_1_1ItemInternal.html">Arcane::ItemInternal</a> devient optionnelle pour créer une instance de <a class="el" href="../../df/d5f/classArcane_1_1Item.html" title="Classe de base d&#39;un élément de maillage.">Arcane::Item</a> ou d'une des classes dérivées. Il est maintenant possible de créer une instance de ces classes uniquement avec un <a class="el" href="../../de/dc8/classArcane_1_1ItemLocalId.html" title="Index d&#39;un Item dans une variable.">Arcane::ItemLocalId</a> et un <a class="el" href="../../df/d0b/classArcane_1_1ItemSharedInfo.html">Arcane::ItemSharedInfo</a>*. La classe interne <a class="el" href="../../da/d82/classArcane_1_1ItemBaseBuildInfo.html">Arcane::ItemBaseBuildInfo</a> est utilisée pour cela.</li>
<li>Une classe Arcane::ItemBase a été créée. Elle contient uniquement un <a class="el" href="../../de/dc8/classArcane_1_1ItemLocalId.html" title="Index d&#39;un Item dans une variable.">Arcane::ItemLocalId</a> et un <a class="el" href="../../df/d0b/classArcane_1_1ItemSharedInfo.html">Arcane::ItemSharedInfo</a>*. Elle sert de classe de base à <a class="el" href="../../df/d5f/classArcane_1_1Item.html" title="Classe de base d&#39;un élément de maillage.">Arcane::Item</a> et <a class="el" href="../../dd/df1/classArcane_1_1ItemInternal.html">Arcane::ItemInternal</a>. Cette classe est interne à <a class="el" href="../../d0/d32/namespaceArcane.html" title="-*- tab-width: 2; indent-tabs-mode: nil; coding: utf-8-with-signature -*-">Arcane</a> mais ne permet pas de modifier les valeurs d'une entité (par exemple elle contient une méthode <a class="el" href="../../d7/d1e/classArcane_1_1impl_1_1ItemBase.html#ad373ca214c9788f5704d60fa3fc38302" title="Numéro du sous-domaine propriétaire de l&#39;entité">Arcane::ItemBase::owner()</a> mais pas de méthode <code>setOwner()</code>). Grâce à cette classe, <a class="el" href="../../df/d5f/classArcane_1_1Item.html" title="Classe de base d&#39;un élément de maillage.">Arcane::Item</a> ne dépend plus de <a class="el" href="../../dd/df1/classArcane_1_1ItemInternal.html">Arcane::ItemInternal</a> et peut directement récupérer les informations via <a class="el" href="../../df/d0b/classArcane_1_1ItemSharedInfo.html">Arcane::ItemSharedInfo</a> ce qui éviter un niveau d'indirection pour accéder aux connectivités par exemple.</li>
<li>Les itérateurs sur les entités (<a class="el" href="../../d6/dcd/classArcane_1_1ItemEnumerator.html" title="Enumérateur sur une liste d&#39;entités.">Arcane::ItemEnumerator</a>) ont été modifiés pour qu'ils n'utilisent plus <a class="el" href="../../dd/df1/classArcane_1_1ItemInternal.html">Arcane::ItemInternal</a> à chaque incrémentation ce qui peut légèrement améliorer les performances car on évite une indirection supplémentaire à chaque fois.</li>
<li>les données qui étaient portées par <a class="el" href="../../dd/df1/classArcane_1_1ItemInternal.html">Arcane::ItemInternal</a> (comme <code>owner()</code>, <code>flags()</code>) sont maintenant conservées par des variables tableaux (<a class="el" href="../../d3/d00/group__Variable.html#ga0e2b61714e05c0443f27740744606a69" title="Variable tableau de type entier 32 bits.">Arcane::VariableArrayInt32</a> ou <a class="el" href="../../d3/d00/group__Variable.html#ga60ba3b60eaf5a5ea5c050bfa45615f54" title="Variable tableau de type entier 16 bits.">Arcane::VariableArrayInt16</a>) gérées par la famille d'entité.</li>
</ul>
<p>Avec ces modifications, à terme il sera possible de supprimer entièrement l'utilisation de <a class="el" href="../../dd/df1/classArcane_1_1ItemInternal.html">Arcane::ItemInternal</a>.</p>
<p>Cependant, cette classe est souvent utilisée dans les codes donc ce changement doit être progressif. Notamment, la méthode <a class="el" href="../../dd/d0a/classArcane_1_1IItemFamily.html#a5274480df9c2e1163d59cda218f882bf" title="Tableau interne des entités.">Arcane::IItemFamily::itemsInternal()</a> est utilisée pour récupérer une instance de <a class="el" href="../../df/d5f/classArcane_1_1Item.html" title="Classe de base d&#39;un élément de maillage.">Arcane::Item</a> à partir d'un Arcane::ItemInternalArrayView (qui est le type retourné par cette méthode).</p>
<p>Pour préparer cela et garder le code compatible, une nouvelle classe <a class="el" href="../../d9/d68/classArcane_1_1ItemInfoListView.html" title="Vue sur une liste pour obtenir des informations sur les entités.">Arcane::ItemInfoListView</a> (et les classes dérivées spécifiques aux entités comme <a class="el" href="../../d8/d5f/classArcane_1_1CellInfoListView.html" title="Vue sur les informations des mailles.">Arcane::CellInfoListView</a>, <a class="el" href="../../da/dfe/classArcane_1_1DoFInfoListView.html" title="Vue sur les informations des DoFs.">Arcane::DoFInfoListView</a>) permet de récupérer les informations sur les entités pour lesquelles il fallait auparavant utiliser <a class="el" href="../../dd/d0a/classArcane_1_1IItemFamily.html#a5274480df9c2e1163d59cda218f882bf" title="Tableau interne des entités.">Arcane::IItemFamily::itemsInternal()</a>.</p>
<p>Il est possible de modifier le code actuel comme suit:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../dd/d0a/classArcane_1_1IItemFamily.html">Arcane::IItemFamily</a>* cell_family = ...;</div>
<div class="line"><a class="code hl_class" href="../../db/d8c/classArccore_1_1ConstArrayView.html">Arcane::ItemInternalArrayView</a> cells = cell_family-&gt;<a class="code hl_function" href="../../dd/d0a/classArcane_1_1IItemFamily.html#a5274480df9c2e1163d59cda218f882bf">itemsInternal</a>();</div>
<div class="line">Arcane::Int32 my_local_id = ...;</div>
<div class="line"><a class="code hl_class" href="../../d9/db2/classArcane_1_1Cell.html">Arcane::Cell</a> my_cell = cells[my_local_id];</div>
<div class="ttc" id="aclassArcane_1_1Cell_html"><div class="ttname"><a href="../../d9/db2/classArcane_1_1Cell.html">Arcane::Cell</a></div><div class="ttdoc">Maille d'un maillage.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dd4/Item_8h_source.html#l01171">Item.h:1173</a></div></div>
<div class="ttc" id="aclassArcane_1_1IItemFamily_html"><div class="ttname"><a href="../../dd/d0a/classArcane_1_1IItemFamily.html">Arcane::IItemFamily</a></div><div class="ttdoc">Interface d'une famille d'entités.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/dd3/IItemFamily_8h_source.html#l00110">IItemFamily.h:111</a></div></div>
<div class="ttc" id="aclassArcane_1_1IItemFamily_html_a5274480df9c2e1163d59cda218f882bf"><div class="ttname"><a href="../../dd/d0a/classArcane_1_1IItemFamily.html#a5274480df9c2e1163d59cda218f882bf">Arcane::IItemFamily::itemsInternal</a></div><div class="ttdeci">virtual ItemInternalArrayView itemsInternal()=0</div><div class="ttdoc">Tableau interne des entités.</div></div>
<div class="ttc" id="aclassArccore_1_1ConstArrayView_html"><div class="ttname"><a href="../../db/d8c/classArccore_1_1ConstArrayView.html">Arccore::ConstArrayView</a></div><div class="ttdoc">Vue constante d'un tableau de type T.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d51/arccore_2src_2base_2arccore_2base_2ArrayView_8h_source.html#l00532">arccore/src/base/arccore/base/ArrayView.h:533</a></div></div>
</div><!-- fragment --><p>Ce code est à remplacer par cela:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../dd/d0a/classArcane_1_1IItemFamily.html">Arcane::IItemFamily</a>* cell_family = ...;</div>
<div class="line"><a class="code hl_class" href="../../d8/d5f/classArcane_1_1CellInfoListView.html">Arcane::CellInfoListView</a> cells(cell_family);</div>
<div class="line">Arcane::Int32 my_local_id = ...;</div>
<div class="line"><a class="code hl_class" href="../../d9/db2/classArcane_1_1Cell.html">Arcane::Cell</a> my_cell = cells[my_local_id];</div>
<div class="ttc" id="aclassArcane_1_1CellInfoListView_html"><div class="ttname"><a href="../../d8/d5f/classArcane_1_1CellInfoListView.html">Arcane::CellInfoListView</a></div><div class="ttdoc">Vue sur les informations des mailles.</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d3c/ItemInfoListView_8h_source.html#l00205">ItemInfoListView.h:207</a></div></div>
</div><!-- fragment --><p>Par la suite, si l'instance unique de <a class="el" href="../../df/d0b/classArcane_1_1ItemSharedInfo.html">Arcane::ItemSharedInfo</a> par famille est créée en mémoire unifiée, il sera possible d'accéder aux informations des entités sur accélérateur.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Modifications dans la version 3.10</h1>
<p>Arcane utilise très souvent pour gérer les entités du maillage des listes de <a class="el" href="../../de/dc8/classArcane_1_1ItemLocalId.html" title="Index d&#39;un Item dans une variable.">Arcane::ItemLocalId</a> qui peuvent être ramenées à des listes de Arcane::Int32. C'est par exemple utilisé dans les cas suivants:</p>
<ul>
<li>Liste des entités d'un groupe (<a class="el" href="../../d9/d27/classArcane_1_1ItemGroup.html" title="Groupe d&#39;entités de maillage.">Arcane::ItemGroup</a>) ou d'un vecteur d'entité (<a class="el" href="../../d1/d71/classArcane_1_1ItemVector.html" title="Vecteur d&#39;entités.">Arcane::ItemVector</a>)</li>
<li>Liste des entités connectées à une autre entité ((par exemple <a class="el" href="../../d4/d55/classArcane_1_1ItemWithNodes.html#ac6be927b92f077cf8b023d3b8cc8c2e8" title="Liste des noeuds de l&#39;entité">Arcane::Cell::nodes()</a>))</li>
</ul>
<p>Pour ces deux cas la structure interne est gérée de la même manière (via une instance de <a class="el" href="../../d6/df2/classArcane_1_1ItemVectorView.html" title="Vue sur un vecteur d&#39;entités.">Arcane::ItemVectorView</a>) et Arcane maintient en interne des objets de type <a class="el" href="../../d0/d32/namespaceArcane.html#a638ab0b5813a316efa87a4e382bedc59" title="Equivalent C d&#39;un tableau à une dimension d&#39;entiers 32 bits.">Arcane::Int32ConstArrayView</a> qui peuvent être accédés directement par le développeur (par exemple via <a class="el" href="../../d6/df2/classArcane_1_1ItemVectorView.html#a50aeef9f6943487b0b38f194cfb31559" title="Tableau des numéros locaux des entités.">Arcane::ItemVectorView::localIds()</a>).</p>
<p>Pour gérer plus efficacement les connectivités, notamment dans le cas cartésien, et réduire l'empreinte mémoire, il est nécessaire de pouvoir faire évoluter la manière dont sont conservées ces listes de localId(). Afin de pouvoir procéder à ces évolutions, il est nécessaire de modifier deux choses dans Arcane:</p>
<ol type="1">
<li>Séparer la gestion de la connectivité des entités de celle des liste d'entités d'un groupe.</li>
<li>Masquer la structure interne utilisée pour conserver ces listes de localId().</li>
</ol>
<p>Cela implique de changer certains mécanismes pour accéder à ces informations qui sont détaillés ci-dessous.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Séparer la gestion de la connectivité des entités de celle des liste d'entités d'un groupe</h2>
<p>Cela signifie que les méthodes d'accès aux connectivités et celles d'accès aux entités d'un groupe ne retournent pas le même type d'objet. Dans la version 3.9 de Arcane, les méthodes d'accès aux connectivités ont donc été modifées et retournent maintenant une instance de <a class="el" href="../../d9/db7/classArcane_1_1ItemConnectedListViewT.html" title="Vue sur une liste d&#39;entités connectées à une autre.">Arcane::ItemConnectedListViewT</a> au lieu d'une instance de <a class="el" href="../../d7/d90/classArcane_1_1ItemVectorViewT.html" title="Vue sur un tableau typé d&#39;entités.">Arcane::ItemVectorViewT</a>.</p>
<p>Il existe actuellement un opérateur de conversion entre <a class="el" href="../../d9/db7/classArcane_1_1ItemConnectedListViewT.html" title="Vue sur une liste d&#39;entités connectées à une autre.">Arcane::ItemConnectedListViewT</a> et <a class="el" href="../../d7/d90/classArcane_1_1ItemVectorViewT.html" title="Vue sur un tableau typé d&#39;entités.">Arcane::ItemVectorViewT</a> pour rendre le code compatible avec l'existant.</p>
<p>Cela impacte aussi les macros telles que <a class="el" href="../../d6/d0f/ItemEnumerator_8h.html#a44837b340ff8a4fc02299e3160a4da20" title="Enumérateur générique d&#39;un groupe d&#39;entité">ENUMERATE_()</a>, <a class="el" href="../../d6/d0f/ItemEnumerator_8h.html#aaf5910d68ad8428248f844535ab071f3" title="Enumérateur générique d&#39;un groupe de mailles.">ENUMERATE_CELL()</a> ou <a class="el" href="../../d6/d0f/ItemEnumerator_8h.html#aea36524754c129124072de38e045d6ba" title="Enumérateur générique d&#39;un groupe de noeuds.">ENUMERATE_NODE()</a> qui sont maintenant réservées aux itérations sur les <a class="el" href="../../d9/d27/classArcane_1_1ItemGroup.html" title="Groupe d&#39;entités de maillage.">Arcane::ItemGroup</a> ou <a class="el" href="../../d1/d71/classArcane_1_1ItemVector.html" title="Vecteur d&#39;entités.">Arcane::ItemVector</a>. Actuellement il y a plusieurs manières pour itérer sur les entités d'une autre connectivité. Par exemple:</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="../../d8/d8e/classArcane_1_1ItemGroupT.html">Arcane::CellGroup</a> cell_group = ...;</div>
<div class="line"><a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#a44837b340ff8a4fc02299e3160a4da20">ENUMERATE_</a>(Cell,icell,cell_group){</div>
<div class="line">  <a class="code hl_class" href="../../d9/db2/classArcane_1_1Cell.html">Arcane::Cell</a> cell = *icell;</div>
<div class="line">  <span class="comment">// (1) Itération avec ItemEnumerator</span></div>
<div class="line">  <span class="keywordflow">for</span>( <a class="code hl_typedef" href="../../de/db5/group__Mesh.html#ga8270de1e7b8febe980cab11b992c47b5">Arcane::NodeEnumerator</a> inode(cell.<a class="code hl_function" href="../../d4/d55/classArcane_1_1ItemWithNodes.html#ac6be927b92f077cf8b023d3b8cc8c2e8">nodes</a>()); inode.hasNext(); ++inode ){</div>
<div class="line">    <a class="code hl_class" href="../../d8/dd7/classArcane_1_1Node.html">Arcane::Node</a> node = *inode;</div>
<div class="line">    info() &lt;&lt; <span class="stringliteral">&quot;Node uid=&quot;</span> &lt;&lt; node.<a class="code hl_function" href="../../df/d5f/classArcane_1_1Item.html#a8e5cf3572ae8a043fae3e32fe400551b">uniqueId</a>();</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// (2) Itération avec ENUMERATE_</span></div>
<div class="line">  <a class="code hl_define" href="../../d6/d0f/ItemEnumerator_8h.html#a44837b340ff8a4fc02299e3160a4da20">ENUMERATE_</a>(Node,inode,cell.<a class="code hl_function" href="../../d4/d55/classArcane_1_1ItemWithNodes.html#ac6be927b92f077cf8b023d3b8cc8c2e8">nodes</a>()){</div>
<div class="line">    <a class="code hl_class" href="../../d8/dd7/classArcane_1_1Node.html">Arcane::Node</a> node = *inode;</div>
<div class="line">    info() &lt;&lt; <span class="stringliteral">&quot;Node uid=&quot;</span> &lt;&lt; node.<a class="code hl_function" href="../../df/d5f/classArcane_1_1Item.html#a8e5cf3572ae8a043fae3e32fe400551b">uniqueId</a>();</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// (3) Itération avec &#39;for-range&#39;</span></div>
<div class="line">  <span class="keywordflow">for</span>( <a class="code hl_class" href="../../d8/dd7/classArcane_1_1Node.html">Arcane::Node</a> node : cell.nodes()){</div>
<div class="line">    info() &lt;&lt; <span class="stringliteral">&quot;Node uid=&quot;</span> &lt;&lt; node.<a class="code hl_function" href="../../df/d5f/classArcane_1_1Item.html#a8e5cf3572ae8a043fae3e32fe400551b">uniqueId</a>();</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aItemEnumerator_8h_html_a44837b340ff8a4fc02299e3160a4da20"><div class="ttname"><a href="../../d6/d0f/ItemEnumerator_8h.html#a44837b340ff8a4fc02299e3160a4da20">ENUMERATE_</a></div><div class="ttdeci">#define ENUMERATE_(type, name, group)</div><div class="ttdoc">Enumérateur générique d'un groupe d'entité</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d0f/ItemEnumerator_8h_source.html#l00407">ItemEnumerator.h:407</a></div></div>
<div class="ttc" id="aclassArcane_1_1ItemGroupT_html"><div class="ttname"><a href="../../d8/d8e/classArcane_1_1ItemGroupT.html">Arcane::ItemGroupT&lt; Cell &gt;</a></div></div>
<div class="ttc" id="aclassArcane_1_1ItemWithNodes_html_ac6be927b92f077cf8b023d3b8cc8c2e8"><div class="ttname"><a href="../../d4/d55/classArcane_1_1ItemWithNodes.html#ac6be927b92f077cf8b023d3b8cc8c2e8">Arcane::ItemWithNodes::nodes</a></div><div class="ttdeci">NodeConnectedListViewType nodes() const</div><div class="ttdoc">Liste des noeuds de l'entité</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dd4/Item_8h_source.html#l00766">Item.h:766</a></div></div>
<div class="ttc" id="aclassArcane_1_1Item_html_a8e5cf3572ae8a043fae3e32fe400551b"><div class="ttname"><a href="../../df/d5f/classArcane_1_1Item.html#a8e5cf3572ae8a043fae3e32fe400551b">Arcane::Item::uniqueId</a></div><div class="ttdeci">ItemUniqueId uniqueId() const</div><div class="ttdoc">Identifiant unique sur tous les domaines.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dd4/Item_8h_source.html#l00212">Item.h:212</a></div></div>
<div class="ttc" id="aclassArcane_1_1Node_html"><div class="ttname"><a href="../../d8/dd7/classArcane_1_1Node.html">Arcane::Node</a></div><div class="ttdoc">Noeud d'un maillage.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/ddc/Dom_8h_source.html#l00203">Dom.h:204</a></div></div>
<div class="ttc" id="agroup__Mesh_html_ga8270de1e7b8febe980cab11b992c47b5"><div class="ttname"><a href="../../de/db5/group__Mesh.html#ga8270de1e7b8febe980cab11b992c47b5">Arcane::NodeEnumerator</a></div><div class="ttdeci">ItemEnumeratorT&lt; Node &gt; NodeEnumerator</div><div class="ttdoc">Enumérateurs sur des noeuds.</div><div class="ttdef"><b>Definition</b> <a href="../../db/daf/ItemTypes_8h_source.html#l00252">ItemTypes.h:252</a></div></div>
</div><!-- fragment --><p>Le mécanisme (3) est à privilégier. A terme, le mécanisme (1) va disparaitre car le type <a class="el" href="../../d6/dcd/classArcane_1_1ItemEnumerator.html" title="Enumérateur sur une liste d&#39;entités.">Arcane::ItemEnumerator</a> sera réservé aux itérations sur les groupes. Le mécanisme (2) pourrait continuer à être disponible mais sera moins performant que le mécanisme (3).</p>
<p>Afin d'éviter aussi tout risque d'incompatibilité dans le futur, il est préférable de ne pas utiliser directement les types des itérateurs retournés mais d'utiliser le mot clé <code>auto</code> à la place.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
Masquer la structure interne gérant les listes de localId()</h2>
<p>Pour masquer ces structures, les classes de Arcane qui gèrent les listes d'entités ne retourneront plus de types tels que <a class="el" href="../../d0/d32/namespaceArcane.html#a638ab0b5813a316efa87a4e382bedc59" title="Equivalent C d&#39;un tableau à une dimension d&#39;entiers 32 bits.">Arcane::Int32ConstArrayView</a>. Par exemple les méthodes telles que <a class="el" href="../../d6/df2/classArcane_1_1ItemVectorView.html#a50aeef9f6943487b0b38f194cfb31559" title="Tableau des numéros locaux des entités.">Arcane::ItemVectorView::localIds()</a> ou <a class="el" href="../../df/d28/classArcane_1_1ItemIndexArrayView.html#acd233bdb579a1e8daaf9f8a865e5a293" title="Tableau des numéros locaux des entités.">Arcane::ItemIndexArrayView::localIds()</a> vont disparaitre. Pour être compatible avec l'existant, les méthodes <a class="el" href="../../d6/df2/classArcane_1_1ItemVectorView.html#a2e1b075b46c9642a8f7d1a023d1a60ca" title="Ajoute à ids la liste des localIds() du vecteur.">Arcane::ItemVectorView::fillLocalIds()</a> et <a class="el" href="../../df/d28/classArcane_1_1ItemIndexArrayView.html#a2856de5f13d3194bc15a3054b622eaa0" title="Ajoute à ids la liste des localIds() du vecteur.">Arcane::ItemIndexArrayView::fillLocalIds()</a> ont été ajoutées pour permettre de remplir un tableau avec la liste des localId(). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
  <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
    <ul>
      <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li><li class="navelem"><a class="el" href="../../d0/d82/arcanedoc_news.html">Nouveautés et changements</a></li>
      <li class="footer">Généré le Lundi 22 Juillet 2024 02:43:18 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
    </ul>
  </div>
  <script type="text/javascript" src="../../script-apply-config-theme.js"></script>
  <script type="text/javascript">
    // On met l'appel à cette fonction dans le footer dans le cas où
    // une page ne veut pas de personnalisation (changement de la 
    // variable globale "no_custom_theme").
    applyConfigWithCookies();
  </script>
</body>
</html>
