<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Arcane: Utilisation des types tableaux</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Arcane
   &#160;<span id="projectnumber">3.1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Généré par Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Recherche','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Recherche');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d0/dc6/arcanedoc_array_usage.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Utilisation des types tableaux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="arcanedoc"></a>
 array_usage type Types tableaux</h1>
<p>L'utilisation des tableaux dans Arcane utilise deux types de classes: les <em>conteneurs</em> et les <em>vues</em>.</p>
<p>Les conteneurs tableaux permettent de stocker des éléments et gèrent la mémoire pour ce stockage. Les vues représentent un sous-ensemble d'un conteneur et sont des objets <b>temporaires</b>.</p>
<p>Les classes gérant les conteneurs ont un nom qui finit par <em>Array</em>. Les conteneurs ont les caractéristiques suivantes:</p><ul>
<li>ils gèrent la mémoire nécessaire pour conserver leurs éléments.</li>
<li>les éléments sont conservés de manière contigüe en mémoire. Il est donc possible d'utiliser ces conteneurs à des fonctions en langage C par exemple qui prennent en argument des pointeurs.</li>
</ul>
<p>Les classes gérant les vues ont un nom qui finit par <em>View</em>, comme ArrayView ou ConstArrayView. Les vues ont les caractéristiques suivantes:</p><ul>
<li>elles ne gèrent aucune mémoire et sont toutes issues d'un conteneur (qui n'est pas nécessairement une classe <a class="el" href="../../d0/d32/namespaceArcane.html" title="-*- tab-width: 2; indent-tabs-mode: nil; coding: utf-8-with-signature -*-">Arcane</a>)</li>
<li>elles ne sont valide que tant que le conteneur associé existe et n'est pas modifié.</li>
<li>elles s'utilisent toujours par valeur et jamais par référence (on ne leur applique pas l'opérateur &amp;).</li>
</ul>
<p>En général, il ne faut donc pas utiliser de vue comme champ d'une classe.</p>
<p>Le tableau suivant donne la liste des classes gérant les tableaux et les vues associées:</p>
<table class="doxtable">
<tr>
<th>Description </th><th>Classe de base </th><th>Sémantique par référence </th><th>Sémantique par valeur </th><th>Vue modifiable </th><th>Vue constante  </th></tr>
<tr>
<td>Tableau 1D </td><td>Array </td><td>SharedArray </td><td>UniqueArray </td><td>ArrayView </td><td>ConstArrayView </td></tr>
<tr>
<td>Tableau 2D classique </td><td>Array2 </td><td>SharedArray2 </td><td>UniqueArray2 </td><td>Array2View </td><td>ConstArray2View  </td></tr>
<tr>
<td>Tableau 2D avec 2ème dimension variable </td><td>MultiArray2 </td><td>SharedMultiArray2 </td><td>UniqueMultiArray2 </td><td>MultiArray2View </td><td>ConstMultiArray2View  </td></tr>
</table>
<p>Pour chaque type de tableau, il existe une classe de base dont hérite une implémentation avec sémantique par référence et une implémentation avec sémantique par valeur. La classe de base n'est ni copiable ni affectable. La différence de sémantique concerne le fonctionnement des opérateurs de recopie et d'affectation:</p><ul>
<li>la sémantique par référence signifie que lorsqu'on fait <em>a = b</em>, alors <em>a</em> devient une référence sur <em>b</em> et toute modification de <em>b</em> modifie aussi <em>a</em>. <div class="fragment"><div class="line">SharedArray&lt;int&gt; a1(5);</div>
<div class="line">SharedArray&lt;int&gt; a2;</div>
<div class="line">a2 = a1; <span class="comment">// a2 et a1 font référence à la même zone mémoire.</span></div>
<div class="line">a1[3] = 1;</div>
<div class="line">a2[3] = 2;</div>
<div class="line">std::cout &lt;&lt; a1[3]; <span class="comment">// affiche &#39;2&#39;</span></div>
</div><!-- fragment --></li>
<li>la sémantique par valeur signifie que lorsqu'on fait <em>a = b</em>, alors <em>a</em> devient une copie des valeurs de <em>b</em> et par la suite les tableaux <em>a</em> et <em>b</em> sont indépendants. <div class="fragment"><div class="line">UniqueArray&lt;int&gt; a1(5);</div>
<div class="line">UniqueArray&lt;int&gt; a2;</div>
<div class="line">a2 = a1; <span class="comment">// a2 devient une copie de a1.</span></div>
<div class="line">a1[3] = 1;</div>
<div class="line">a2[3] = 2;</div>
<div class="line">std::cout &lt;&lt; a1[3]; <span class="comment">// affiche &#39;1&#39;</span></div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="arcanedoc"></a>
 array_usage type Types tableaux</h1>
<p>Voici les règles de bonnes pratiques à respecter pour le passage de tableaux en argument:</p>
<table class="doxtable">
<tr>
<th>Argument </th><th>Besoin </th><th>Opérations possibles  </th></tr>
<tr>
<td>ConstArrayView </td><td>Tableau 1D en lecture seule </td><td><div class="fragment"><div class="line">x = a[i];</div>
</div><!-- fragment -->   </td></tr>
<tr>
<td>ArrayView </td><td>Tableau 1D en lecture et/ou écriture mais dont la taille n'est pas modifiable </td><td><div class="fragment"><div class="line">x = a[i];</div>
<div class="line">a[i] = y;</div>
</div><!-- fragment -->   </td></tr>
<tr>
<td>Array&amp; </td><td>Tableau 1D modifiable et pouvant changer de nombre d'éléments </td><td><div class="fragment"><div class="line">x = a[i];</div>
<div class="line">a[i] = y;</div>
<div class="line">a.resize(u);</div>
<div class="line">a.add(v);</div>
</div><!-- fragment -->   </td></tr>
<tr>
<td>const Array&amp; </td><td>Interdit. Utiliser ConstArrayView à la place </td><td></td></tr>
<tr>
<td>ConstArray2View </td><td>Tableau 2D en lecture seule </td><td><div class="fragment"><div class="line">x = a[i][j];</div>
</div><!-- fragment -->   </td></tr>
<tr>
<td>Array2View </td><td>Tableau 2D en lecture et/ou écriture mais dont la taille n'est pas modifiable </td><td><div class="fragment"><div class="line">x = a[i][j];</div>
<div class="line">a[i][j] = y;</div>
</div><!-- fragment -->   </td></tr>
<tr>
<td>Array2&amp; </td><td>Tableau 2D modifiable et pouvant changer de nombre d'éléments </td><td><div class="fragment"><div class="line">x = a[i][j];</div>
<div class="line">a[i][j] = y;</div>
<div class="line">a.resize(u,v);</div>
</div><!-- fragment -->   </td></tr>
<tr>
<td>const Array&amp; </td><td>Interdit. Utiliser ConstArrayView à la place </td><td></td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">%Arcane</a></li>
    <li class="footer">Généré le Vendredi 22 Octobre 2021 09:11:02 pour Arcane par <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
